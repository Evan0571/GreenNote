2026-01-31 00:23:44.498 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 00:23:44.498 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 00:23:44.498 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 00:23:44.499 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 00:23:44.532 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 00:23:44.533 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 00:23:44.534 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 00:23:44.534 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.154.27', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 00:23:44.536 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 00:23:44.536 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 00:23:44.536 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@3005f808[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 00:23:44.537 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769839153270_127.0.0.1_57187
2026-01-31 00:23:44.537 [nacos-grpc-client-executor-127.0.0.1-319] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769839153270_127.0.0.1_57187]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 00:23:44.540 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@58d7fe69[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 320]
2026-01-31 00:23:44.541 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@57e36a7a[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 489]
2026-01-31 00:23:44.541 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 00:23:44.541 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 00:23:44.541 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 00:23:44.550 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 00:23:44.551 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 00:23:44.556 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 00:23:44.556 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 00:23:49.499 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:23:49.574 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:23:49.948 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:23:49.959 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:23:49.960 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 00:23:49.974 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 00:23:50.588 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=36c914c4-ce20-3349-be10-87e6dc11126c
2026-01-31 00:23:50.626 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.846 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.887 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.890 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.892 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.893 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x000002a1844f13c8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.895 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.899 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:50.901 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:23:51.102 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 00:23:51.111 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 00:23:51.112 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 00:23:51.204 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 00:23:51.205 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1229 ms
2026-01-31 00:23:51.287 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 00:23:51.542 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 00:23:51.723 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 00:23:51.986 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 00:23:52.640 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 00:23:52.704 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 00:23:52.711 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:23:52.711 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 00:23:52.711 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 00:23:52.712 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 00:23:52.735 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 00:23:52.735 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 00:23:52.736 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 00:23:52.740 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 00:23:52.741 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 00:23:52.744 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 00:23:52.752 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of b742ebaa-5223-4285-bde9-e679c71fec5d
2026-01-31 00:23:52.771 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 00:23:52.771 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 00:23:52.771 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 00:23:52.773 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 00:23:52.804 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 00:23:53.555 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769840633363_127.0.0.1_4657
2026-01-31 00:23:53.556 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Notify connected event to listeners.
2026-01-31 00:23:53.556 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 00:23:53.556 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 00:23:53.556 [main] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1115/0x000002a1848f5ae0
2026-01-31 00:23:53.558 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.154.27', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 00:23:53.569 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.154.27:8093 register finished
2026-01-31 00:23:53.661 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 4.779 seconds (process running for 5.24)
2026-01-31 00:24:32.003 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 00:24:32.003 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 00:24:32.004 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 00:24:32.010 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-01-31 00:24:32.091 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1231234567890,"content":"这是一条一级评论","imageUrl":"1.jpg","replyCommentId":null}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 00:24:32.094 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 3
2026-01-31 00:24:32.164 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 00:24:32.175 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.154.27","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 00:24:32.182 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.154.27","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 00:24:32.216 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1231234567890,"content":"这是一条一级评论","imageUrl":"1.jpg","replyCommentId":null,"createTime":"2026-01-31 00:24:32","creatorId":3,"commentId":5}
2026-01-31 00:24:32.224 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 133ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 00:24:32.236 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-01-31 00:24:32.246 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001AAB863947C6B9A953EEB0000, offsetMsgId=7F00000100002A9F00000000000001E0, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=0], queueOffset=1]
2026-01-31 00:24:32.251 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 00:24:32.255 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1231234567890,"content":"这是一条一级评论","imageUrl":"1.jpg","replyCommentId":null,"createTime":"2026-01-31 00:24:32","creatorId":3,"commentId":5}
2026-01-31 00:24:32.270 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":5,"noteId":1231234567890,"userId":3,"contentUuid":"a204a134-f0ec-43b3-ab40-33688a1b364f","content":"这是一条一级评论","isContentEmpty":false,"imageUrl":"1.jpg","level":1,"replyTotal":0,"likeTotal":0,"parentId":1231234567890,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 00:24:32","updateTime":"2026-01-31 00:24:32"}]
2026-01-31 00:24:32.751 [nacos-grpc-client-executor-127.0.0.1-19] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Receive server push request, request = NotifySubscriberRequest, requestId = 14
2026-01-31 00:24:32.751 [nacos-grpc-client-executor-127.0.0.1-19] INFO  com.alibaba.nacos.common.remote.client - [b742ebaa-5223-4285-bde9-e679c71fec5d] Ack server push request, request = NotifySubscriberRequest, requestId = 14
2026-01-31 00:25:25.695 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-01-31 00:25:25.696 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1231234567890,"content":"这是一条2级评论","imageUrl":"2.jpg","replyCommentId":3}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 00:25:25.697 [http-nio-8093-exec-2] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 3
2026-01-31 00:25:25.702 [http-nio-8093-exec-2] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1231234567890,"content":"这是一条2级评论","imageUrl":"2.jpg","replyCommentId":3,"createTime":"2026-01-31 00:25:25","creatorId":3,"commentId":6}
2026-01-31 00:25:25.702 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 6ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 00:25:25.703 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-01-31 00:25:25.707 [NettyClientPublicExecutor_2] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001AAB863947C6B9A960FC70001, offsetMsgId=7F00000100002A9F00000000000003CA, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=0]
2026-01-31 00:25:25.710 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 00:25:25.710 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1231234567890,"content":"这是一条2级评论","imageUrl":"2.jpg","replyCommentId":3,"createTime":"2026-01-31 00:25:25","creatorId":3,"commentId":6}
2026-01-31 00:25:25.747 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 00:25:25.925 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 3(Long)
2026-01-31 00:25:25.954 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 00:25:25.956 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":6,"noteId":1231234567890,"userId":3,"contentUuid":"569b13ef-5bc6-41bc-85da-b519e963126d","content":"这是一条2级评论","isContentEmpty":false,"imageUrl":"2.jpg","level":1,"replyTotal":0,"likeTotal":0,"parentId":1231234567890,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 00:25:25","updateTime":"2026-01-31 00:25:25"}]
2026-01-31 00:38:03.536 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 00:38:03.536 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 00:38:03.536 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 00:38:03.537 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 00:38:03.557 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 00:38:03.557 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.154.27', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1f64ef29[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 00:38:03.559 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769840633363_127.0.0.1_4657
2026-01-31 00:38:03.560 [nacos-grpc-client-executor-127.0.0.1-189] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769840633363_127.0.0.1_4657]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 00:38:03.563 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7cf35253[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 190]
2026-01-31 00:38:03.563 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1645bac1[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 283]
2026-01-31 00:38:03.563 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 00:38:03.563 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 00:38:03.563 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 00:38:03.570 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 00:38:03.571 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 00:38:03.575 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 00:38:03.575 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 00:38:03.576 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 00:38:03.581 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 00:38:10.093 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:38:10.145 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:38:10.513 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:38:10.524 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:38:10.524 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 00:38:10.537 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 00:38:11.114 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=50fe2b79-44fa-3c0e-b359-44c016e3329f
2026-01-31 00:38:11.149 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.151 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.366 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.405 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.408 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.411 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.411 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x000001b49d4f0d38] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.413 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.417 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.418 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 00:38:11.614 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 00:38:11.623 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 00:38:11.624 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 00:38:11.709 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 00:38:11.709 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1170 ms
2026-01-31 00:38:11.786 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 00:38:12.028 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 00:38:12.252 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 00:38:12.319 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 00:38:12.476 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 00:38:13.098 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 00:38:13.158 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 00:38:13.163 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 00:38:13.163 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 00:38:13.163 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 00:38:13.164 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 00:38:13.185 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 00:38:13.185 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 00:38:13.185 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 00:38:13.189 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 00:38:13.189 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 00:38:13.192 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 00:38:13.199 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 8ca69b46-5dc0-4889-adfb-a7499ab23372
2026-01-31 00:38:13.215 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 00:38:13.216 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 00:38:13.217 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 00:38:13.219 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 00:38:13.245 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 00:38:13.954 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769841493772_127.0.0.1_58852
2026-01-31 00:38:13.954 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Notify connected event to listeners.
2026-01-31 00:38:13.954 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 00:38:13.954 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 00:38:13.955 [main] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1115/0x000001b49d8fabc8
2026-01-31 00:38:13.955 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.154.27', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 00:38:13.965 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.154.27:8093 register finished
2026-01-31 00:38:14.052 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 4.537 seconds (process running for 4.968)
2026-01-31 00:40:11.968 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 00:40:11.968 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 00:40:11.969 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2026-01-31 00:40:11.979 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 00:40:12.084 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615528,"content":"这是一条测试评论","imageUrl":null,"replyCommentId":null}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 00:40:12.086 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 00:40:12.166 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 00:40:12.179 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.154.27","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 00:40:12.189 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.154.27","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 00:40:12.232 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615528,"content":"这是一条测试评论","imageUrl":null,"replyCommentId":null,"createTime":"2026-01-31 00:40:12","creatorId":100,"commentId":7}
2026-01-31 00:40:12.241 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 158ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 00:40:12.256 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 00:40:12.262 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001F16063947C6B9AA396DD0000, offsetMsgId=7F00000100002A9F00000000000005AF, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2026-01-31 00:40:12.266 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 00:40:12.269 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615528,"content":"这是一条测试评论","imageUrl":null,"replyCommentId":null,"createTime":"2026-01-31 00:40:12","creatorId":100,"commentId":7}
2026-01-31 00:40:12.281 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":7,"noteId":1862482047415615528,"userId":100,"contentUuid":"a93f4cf7-ef3a-4c42-9f73-037cc64d540d","content":"这是一条测试评论","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615528,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 00:40:12","updateTime":"2026-01-31 00:40:12"}]
2026-01-31 00:40:12.330 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 00:40:12.594 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 7(Long), 1862482047415615528(Long), 100(Long), a93f4cf7-ef3a-4c42-9f73-037cc64d540d(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615528(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T00:40:12(LocalDateTime), 2026-01-31T00:40:12(LocalDateTime)
2026-01-31 00:40:12.653 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 00:40:12.672 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 00:40:12.675 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.154.27","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 00:40:12.675 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.154.27","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 00:40:12.711 [nacos-grpc-client-executor-127.0.0.1-38] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Receive server push request, request = NotifySubscriberRequest, requestId = 17
2026-01-31 00:40:12.712 [nacos-grpc-client-executor-127.0.0.1-38] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Ack server push request, request = NotifySubscriberRequest, requestId = 17
2026-01-31 00:40:13.236 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Receive server push request, request = NotifySubscriberRequest, requestId = 18
2026-01-31 00:40:13.236 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [8ca69b46-5dc0-4889-adfb-a7499ab23372] Ack server push request, request = NotifySubscriberRequest, requestId = 18
2026-01-31 01:07:14.195 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 01:07:14.195 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 01:07:14.196 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 01:07:14.196 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 01:07:14.223 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 01:07:14.224 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.154.27', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 01:07:14.227 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 01:07:14.227 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@47e56a17[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 01:07:14.228 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769841493772_127.0.0.1_58852
2026-01-31 01:07:14.229 [nacos-grpc-client-executor-127.0.0.1-378] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769841493772_127.0.0.1_58852]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 01:07:14.232 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7f5e04db[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 379]
2026-01-31 01:07:14.232 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@31f668d8[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 579]
2026-01-31 01:07:14.232 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 01:07:14.232 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 01:07:14.232 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 01:07:14.248 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 01:07:14.249 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 01:07:14.254 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 01:07:14.254 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 01:07:14.257 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 01:07:14.258 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 13:02:06.150 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:02:06.236 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:02:06.828 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:02:06.845 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:02:06.845 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 13:02:06.870 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 13:02:07.967 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=50fe2b79-44fa-3c0e-b359-44c016e3329f
2026-01-31 13:02:08.044 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.046 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.430 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.504 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.507 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.513 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.513 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x000001ca894e0698] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.517 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.525 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:08.526 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:02:09.009 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 13:02:09.037 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 13:02:09.038 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 13:02:09.243 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 13:02:09.244 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2371 ms
2026-01-31 13:02:09.390 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 13:02:09.821 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 13:02:10.272 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 13:02:10.397 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 13:02:10.663 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 13:02:11.960 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 13:02:12.068 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 13:02:12.079 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:02:12.080 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 13:02:12.081 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 13:02:12.081 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 13:02:12.116 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 13:02:12.117 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 13:02:12.118 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 13:02:12.126 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 13:02:12.126 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 13:02:12.130 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 13:02:12.143 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of fdf6c0f8-802c-4c81-aabb-d5ef6d812085
2026-01-31 13:02:12.171 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 13:02:12.171 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 13:02:12.172 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 13:02:12.175 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 13:02:12.226 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 13:02:13.564 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769886133317_127.0.0.1_50236
2026-01-31 13:02:13.566 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Notify connected event to listeners.
2026-01-31 13:02:13.566 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 13:02:13.566 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 13:02:13.566 [main] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1115/0x000001ca898ee228
2026-01-31 13:02:13.568 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 13:02:13.586 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 13:02:13.747 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 8.42 seconds (process running for 9.12)
2026-01-31 13:02:56.782 [http-nio-8093-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 13:02:56.782 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 13:02:56.783 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 13:02:56.791 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:02:56.898 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615529,"content":"这是一条测试二级评论","imageUrl":null,"replyCommentId":3}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:02:56.899 [http-nio-8093-exec-2] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:02:56.993 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 13:02:57.018 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:02:57.028 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:02:57.416 [http-nio-8093-exec-2] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615529,"content":"这是一条测试二级评论","imageUrl":null,"replyCommentId":3,"createTime":"2026-01-31 13:02:57","creatorId":100,"commentId":2001}
2026-01-31 13:02:57.424 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 529ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:02:57.438 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:02:57.479 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001191863947C6B9D4B99A30000, offsetMsgId=7F00000100002A9F000000000000079E, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=1]
2026-01-31 13:02:57.490 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:02:57.498 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615529,"content":"这是一条测试二级评论","imageUrl":null,"replyCommentId":3,"createTime":"2026-01-31 13:02:57","creatorId":100,"commentId":2001}
2026-01-31 13:02:57.567 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:02:57.607 [nacos-grpc-client-executor-127.0.0.1-24] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Receive server push request, request = NotifySubscriberRequest, requestId = 20
2026-01-31 13:02:57.607 [nacos-grpc-client-executor-127.0.0.1-24] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Ack server push request, request = NotifySubscriberRequest, requestId = 20
2026-01-31 13:02:57.858 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 3(Long)
2026-01-31 13:02:57.900 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:02:57.960 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2001,"noteId":1862482047415615529,"userId":100,"contentUuid":"9eabc954-9a06-47bd-bcc6-dce71dcac1f8","content":"这是一条测试二级评论","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615529,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:02:57","updateTime":"2026-01-31 13:02:57"}]
2026-01-31 13:02:57.968 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:02:58.084 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2001(Long), 1862482047415615529(Long), 100(Long), 9eabc954-9a06-47bd-bcc6-dce71dcac1f8(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615529(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:02:57(LocalDateTime), 2026-01-31T13:02:57(LocalDateTime)
2026-01-31 13:02:58.135 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:02:58.155 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 13:02:58.160 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:02:58.160 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:02:58.576 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001191863947C6B9D4B9E060001, offsetMsgId=7F00000100002A9F0000000000000993, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=0]
2026-01-31 13:02:58.675 [nacos-grpc-client-executor-127.0.0.1-27] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Receive server push request, request = NotifySubscriberRequest, requestId = 21
2026-01-31 13:02:58.675 [nacos-grpc-client-executor-127.0.0.1-27] INFO  com.alibaba.nacos.common.remote.client - [fdf6c0f8-802c-4c81-aabb-d5ef6d812085] Ack server push request, request = NotifySubscriberRequest, requestId = 21
2026-01-31 13:14:31.769 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 13:14:31.769 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 13:14:31.769 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 13:14:31.771 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 13:14:31.798 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 13:14:31.798 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 13:14:31.803 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@93833c[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 13:14:31.804 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769886133317_127.0.0.1_50236
2026-01-31 13:14:31.805 [nacos-grpc-client-executor-127.0.0.1-179] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769886133317_127.0.0.1_50236]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 13:14:31.816 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@2ff9c790[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 180]
2026-01-31 13:14:31.816 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@6427b16a[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 246]
2026-01-31 13:14:31.816 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 13:14:31.816 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 13:14:31.816 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 13:14:31.828 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 13:14:31.829 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 13:14:31.847 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 13:14:31.847 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 13:14:31.849 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 13:14:31.856 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 13:14:36.224 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:14:36.278 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:14:36.636 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:14:36.648 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:14:36.648 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 13:14:36.663 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 13:14:37.370 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=50fe2b79-44fa-3c0e-b359-44c016e3329f
2026-01-31 13:14:37.409 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.411 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.679 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.724 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.726 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.730 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.730 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x000002559e4d6818] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.731 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.735 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.736 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:14:37.983 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 13:14:37.993 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 13:14:37.993 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 13:14:38.112 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 13:14:38.113 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1446 ms
2026-01-31 13:14:38.207 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 13:14:38.474 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 13:14:38.745 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 13:14:38.811 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 13:14:38.974 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 13:14:39.703 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 13:14:39.770 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 13:14:39.776 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:14:39.776 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 13:14:39.777 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 13:14:39.778 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 13:14:39.800 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 13:14:39.800 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 13:14:39.801 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 13:14:39.805 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 13:14:39.805 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 13:14:39.809 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 13:14:39.820 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9
2026-01-31 13:14:39.842 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 13:14:39.843 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 13:14:39.843 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 13:14:39.845 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 13:14:39.874 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 13:14:40.783 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769886880596_127.0.0.1_21471
2026-01-31 13:14:40.785 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Notify connected event to listeners.
2026-01-31 13:14:40.785 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 13:14:40.785 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 13:14:40.785 [main] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1115/0x000002559e8e0cc0
2026-01-31 13:14:40.786 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 13:14:40.797 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 13:14:40.883 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.413 seconds (process running for 5.976)
2026-01-31 13:18:02.777 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 13:18:02.777 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 13:18:02.778 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 13:18:02.789 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:18:02.897 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615520,"content":"这是一条测试二级评论1","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:18:02.899 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:18:02.981 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 13:18:02.997 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:18:03.007 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:18:03.069 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615520,"content":"这是一条测试二级评论1","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:03","creatorId":100,"commentId":2002}
2026-01-31 13:18:03.078 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 182ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:18:03.095 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:18:03.102 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D596B530000, offsetMsgId=7F00000100002A9F0000000000000B34, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2026-01-31 13:18:03.106 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:18:03.110 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615520,"content":"这是一条测试二级评论1","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:03","creatorId":100,"commentId":2002}
2026-01-31 13:18:03.166 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:18:03.342 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:18:03.359 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:18:03.369 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2002,"noteId":1862482047415615520,"userId":100,"contentUuid":"09ddb0cb-5598-4a8a-bfcc-55071165c15d","content":"这是一条测试二级评论1","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615520,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:18:03","updateTime":"2026-01-31 13:18:03"}]
2026-01-31 13:18:03.376 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:18:03.472 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2002(Long), 1862482047415615520(Long), 100(Long), 09ddb0cb-5598-4a8a-bfcc-55071165c15d(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615520(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:18:03(LocalDateTime), 2026-01-31T13:18:03(LocalDateTime)
2026-01-31 13:18:03.478 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:18:03.500 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 13:18:03.505 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:18:03.506 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 13:18:03.538 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D596D0E0001, offsetMsgId=7F00000100002A9F0000000000000D2C, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2026-01-31 13:18:03.551 [nacos-grpc-client-executor-127.0.0.1-62] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Receive server push request, request = NotifySubscriberRequest, requestId = 24
2026-01-31 13:18:03.551 [nacos-grpc-client-executor-127.0.0.1-62] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Ack server push request, request = NotifySubscriberRequest, requestId = 24
2026-01-31 13:18:04.080 [nacos-grpc-client-executor-127.0.0.1-63] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Receive server push request, request = NotifySubscriberRequest, requestId = 25
2026-01-31 13:18:04.080 [nacos-grpc-client-executor-127.0.0.1-63] INFO  com.alibaba.nacos.common.remote.client - [4b11ebcb-4deb-4657-8478-ab3dd6a8d5d9] Ack server push request, request = NotifySubscriberRequest, requestId = 25
2026-01-31 13:18:11.340 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:18:11.341 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615521,"content":"这是一条测试二级评论2","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:18:11.342 [http-nio-8093-exec-2] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:18:11.346 [http-nio-8093-exec-2] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615521,"content":"这是一条测试二级评论2","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:11","creatorId":100,"commentId":2003}
2026-01-31 13:18:11.347 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 6ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:18:11.348 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:18:11.351 [NettyClientPublicExecutor_3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D598B930002, offsetMsgId=7F00000100002A9F0000000000000ECD, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2026-01-31 13:18:11.352 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:18:11.352 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615521,"content":"这是一条测试二级评论2","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:11","creatorId":100,"commentId":2003}
2026-01-31 13:18:11.353 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:18:11.353 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:18:11.354 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:18:11.355 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2003,"noteId":1862482047415615521,"userId":100,"contentUuid":"4719b44a-13f9-4186-8695-cd0e4266f832","content":"这是一条测试二级评论2","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615521,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:18:11","updateTime":"2026-01-31 13:18:11"}]
2026-01-31 13:18:11.356 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:18:11.358 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2003(Long), 1862482047415615521(Long), 100(Long), 4719b44a-13f9-4186-8695-cd0e4266f832(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615521(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:18:11(LocalDateTime), 2026-01-31T13:18:11(LocalDateTime)
2026-01-31 13:18:11.359 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:18:11.388 [NettyClientPublicExecutor_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D598BB80003, offsetMsgId=7F00000100002A9F00000000000010C5, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2026-01-31 13:18:18.112 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:18:18.113 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论3","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:18:18.113 [http-nio-8093-exec-3] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:18:18.117 [http-nio-8093-exec-3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论3","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:18","creatorId":100,"commentId":2004}
2026-01-31 13:18:18.118 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:18:18.118 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:18:18.121 [NettyClientPublicExecutor_5] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D59A6060004, offsetMsgId=7F00000100002A9F0000000000001266, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=2]
2026-01-31 13:18:18.122 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:18:18.123 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论3","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:18","creatorId":100,"commentId":2004}
2026-01-31 13:18:18.123 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:18:18.124 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:18:18.125 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:18:18.126 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2004,"noteId":1862482047415615522,"userId":100,"contentUuid":"ec5775bd-77e3-48c2-b429-f289bff95bfa","content":"这是一条测试二级评论3","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615522,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:18:18","updateTime":"2026-01-31 13:18:18"}]
2026-01-31 13:18:18.127 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:18:18.127 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2004(Long), 1862482047415615522(Long), 100(Long), ec5775bd-77e3-48c2-b429-f289bff95bfa(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615522(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:18:18(LocalDateTime), 2026-01-31T13:18:18(LocalDateTime)
2026-01-31 13:18:18.128 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:18:18.159 [NettyClientPublicExecutor_6] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D59A62C0005, offsetMsgId=7F00000100002A9F000000000000145E, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=1]
2026-01-31 13:18:44.481 [http-nio-8093-exec-8] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:18:44.482 [http-nio-8093-exec-8] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论3","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:18:44.482 [http-nio-8093-exec-8] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:18:44.486 [http-nio-8093-exec-8] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论3","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:44","creatorId":100,"commentId":2005}
2026-01-31 13:18:44.487 [http-nio-8093-exec-8] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:18:44.488 [http-nio-8093-exec-8] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:18:44.491 [NettyClientPublicExecutor_7] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A0D070006, offsetMsgId=7F00000100002A9F00000000000015FF, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=3]
2026-01-31 13:18:44.491 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:18:44.491 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论3","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:18:44","creatorId":100,"commentId":2005}
2026-01-31 13:18:44.492 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:18:44.493 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:18:44.494 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:18:44.494 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2005,"noteId":1862482047415615522,"userId":100,"contentUuid":"2355118e-48a7-4d96-b384-a3cfb2cd0901","content":"这是一条测试二级评论3","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615522,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:18:44","updateTime":"2026-01-31 13:18:44"}]
2026-01-31 13:18:44.495 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:18:44.497 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2005(Long), 1862482047415615522(Long), 100(Long), 2355118e-48a7-4d96-b384-a3cfb2cd0901(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615522(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:18:44(LocalDateTime), 2026-01-31T13:18:44(LocalDateTime)
2026-01-31 13:18:44.499 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:18:44.531 [NettyClientPublicExecutor_8] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A0D300007, offsetMsgId=7F00000100002A9F00000000000017F7, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2026-01-31 13:19:13.760 [http-nio-8093-exec-5] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:19:13.761 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论a","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:19:13.762 [http-nio-8093-exec-5] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:19:13.765 [http-nio-8093-exec-5] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论a","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:19:13","creatorId":100,"commentId":2006}
2026-01-31 13:19:13.766 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:19:13.766 [http-nio-8093-exec-5] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:19:13.769 [NettyClientPublicExecutor_9] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A7F660008, offsetMsgId=7F00000100002A9F0000000000001998, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=2]
2026-01-31 13:19:13.771 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:19:13.771 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论a","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:19:13","creatorId":100,"commentId":2006}
2026-01-31 13:19:13.772 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:19:13.773 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:19:13.774 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:19:13.775 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2006,"noteId":1862482047415615522,"userId":100,"contentUuid":"3e3c7bbe-3b36-4205-84b5-ef2b99d394a7","content":"这是一条测试二级评论a","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615522,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:19:13","updateTime":"2026-01-31 13:19:13"}]
2026-01-31 13:19:13.776 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:19:13.776 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2006(Long), 1862482047415615522(Long), 100(Long), 3e3c7bbe-3b36-4205-84b5-ef2b99d394a7(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615522(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:19:13(LocalDateTime), 2026-01-31T13:19:13(LocalDateTime)
2026-01-31 13:19:13.778 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:19:13.808 [NettyClientPublicExecutor_10] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A7F8C0009, offsetMsgId=7F00000100002A9F0000000000001B90, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=2]
2026-01-31 13:19:17.301 [http-nio-8093-exec-6] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:19:17.303 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论b","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:19:17.303 [http-nio-8093-exec-6] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:19:17.306 [http-nio-8093-exec-6] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论b","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:19:17","creatorId":100,"commentId":2007}
2026-01-31 13:19:17.307 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:19:17.308 [http-nio-8093-exec-6] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:19:17.311 [NettyClientPublicExecutor_11] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A8D3B000A, offsetMsgId=7F00000100002A9F0000000000001D31, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=3], queueOffset=1]
2026-01-31 13:19:17.313 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:19:17.313 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论b","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:19:17","creatorId":100,"commentId":2007}
2026-01-31 13:19:17.313 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:19:17.314 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:19:17.315 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:19:17.315 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2007,"noteId":1862482047415615522,"userId":100,"contentUuid":"639b0c28-f1ff-408e-9570-7589f1ae3dff","content":"这是一条测试二级评论b","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615522,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:19:17","updateTime":"2026-01-31 13:19:17"}]
2026-01-31 13:19:17.316 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:19:17.317 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2007(Long), 1862482047415615522(Long), 100(Long), 639b0c28-f1ff-408e-9570-7589f1ae3dff(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615522(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:19:17(LocalDateTime), 2026-01-31T13:19:17(LocalDateTime)
2026-01-31 13:19:17.319 [ConsumeMessageThread_greennote_group_PublishCommentTopic_6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:19:17.352 [NettyClientPublicExecutor_12] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A8D65000B, offsetMsgId=7F00000100002A9F0000000000001F29, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=2]
2026-01-31 13:19:20.970 [http-nio-8093-exec-7] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:19:20.971 [http-nio-8093-exec-7] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论c","imageUrl":null,"replyCommentId":100}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:19:20.971 [http-nio-8093-exec-7] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:19:20.974 [http-nio-8093-exec-7] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论c","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:19:20","creatorId":100,"commentId":2008}
2026-01-31 13:19:20.975 [http-nio-8093-exec-7] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:19:20.976 [http-nio-8093-exec-7] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:19:20.979 [NettyClientPublicExecutor_13] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A9B8F000C, offsetMsgId=7F00000100002A9F00000000000020CA, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=3], queueOffset=2]
2026-01-31 13:19:20.979 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:19:20.979 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论c","imageUrl":null,"replyCommentId":100,"createTime":"2026-01-31 13:19:20","creatorId":100,"commentId":2008}
2026-01-31 13:19:20.980 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:19:20.980 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 100(Long)
2026-01-31 13:19:20.981 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 0
2026-01-31 13:19:20.982 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2008,"noteId":1862482047415615522,"userId":100,"contentUuid":"0cb2f8f0-76f9-471e-9de9-fffe3ab97c8a","content":"这是一条测试二级评论c","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615522,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:19:20","updateTime":"2026-01-31 13:19:20"}]
2026-01-31 13:19:20.982 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:19:20.984 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2008(Long), 1862482047415615522(Long), 100(Long), 0cb2f8f0-76f9-471e-9de9-fffe3ab97c8a(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615522(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T13:19:20(LocalDateTime), 2026-01-31T13:19:20(LocalDateTime)
2026-01-31 13:19:20.985 [ConsumeMessageThread_greennote_group_PublishCommentTopic_7] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:19:21.017 [NettyClientPublicExecutor_14] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5A9BB5000D, offsetMsgId=7F00000100002A9F00000000000022C2, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=3]
2026-01-31 13:20:05.274 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:20:05.276 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论x","imageUrl":null,"replyCommentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:20:05.276 [http-nio-8093-exec-4] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:20:05.281 [http-nio-8093-exec-4] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论x","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:20:05","creatorId":100,"commentId":2009}
2026-01-31 13:20:05.281 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:20:05.283 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:20:05.284 [NettyClientPublicExecutor_15] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5B48A1000E, offsetMsgId=7F00000100002A9F0000000000002463, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=0], queueOffset=2]
2026-01-31 13:20:05.286 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:20:05.287 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论x","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:20:05","creatorId":100,"commentId":2009}
2026-01-31 13:20:05.288 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:20:05.288 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long)
2026-01-31 13:20:05.291 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:20:05.292 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2009,"noteId":1862482047415615522,"userId":100,"contentUuid":"b0308810-2790-4c58-b3a3-bc1916a22c9b","content":"这是一条测试二级评论x","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2008,"replyCommentId":2008,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:20:05","updateTime":"2026-01-31 13:20:05"}]
2026-01-31 13:20:05.293 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:20:05.297 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2009(Long), 1862482047415615522(Long), 100(Long), b0308810-2790-4c58-b3a3-bc1916a22c9b(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2008(Long), 2008(Long), 100(Long), false(Boolean), 2026-01-31T13:20:05(LocalDateTime), 2026-01-31T13:20:05(LocalDateTime)
2026-01-31 13:20:05.299 [ConsumeMessageThread_greennote_group_PublishCommentTopic_8] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:20:05.323 [NettyClientPublicExecutor_16] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5B48C7000F, offsetMsgId=7F00000100002A9F000000000000265C, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=4]
2026-01-31 13:20:08.810 [http-nio-8093-exec-9] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:20:08.812 [http-nio-8093-exec-9] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论y","imageUrl":null,"replyCommentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:20:08.812 [http-nio-8093-exec-9] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:20:08.815 [http-nio-8093-exec-9] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论y","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:20:08","creatorId":100,"commentId":2010}
2026-01-31 13:20:08.816 [http-nio-8093-exec-9] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:20:08.816 [http-nio-8093-exec-9] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:20:08.818 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5B56700010, offsetMsgId=7F00000100002A9F00000000000027EE, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=4]
2026-01-31 13:20:08.819 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:20:08.820 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论y","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:20:08","creatorId":100,"commentId":2010}
2026-01-31 13:20:08.820 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:20:08.820 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long)
2026-01-31 13:20:08.821 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:20:08.821 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2010,"noteId":1862482047415615522,"userId":100,"contentUuid":"7a1a6875-eeb4-4f2f-b5f2-d5cded730b42","content":"这是一条测试二级评论y","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2008,"replyCommentId":2008,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:20:08","updateTime":"2026-01-31 13:20:08"}]
2026-01-31 13:20:08.823 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:20:08.824 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2010(Long), 1862482047415615522(Long), 100(Long), 7a1a6875-eeb4-4f2f-b5f2-d5cded730b42(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2008(Long), 2008(Long), 100(Long), false(Boolean), 2026-01-31T13:20:08(LocalDateTime), 2026-01-31T13:20:08(LocalDateTime)
2026-01-31 13:20:08.825 [ConsumeMessageThread_greennote_group_PublishCommentTopic_9] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:20:08.866 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5B56A10011, offsetMsgId=7F00000100002A9F00000000000029E7, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=3]
2026-01-31 13:20:11.714 [http-nio-8093-exec-10] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:20:11.715 [http-nio-8093-exec-10] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615522,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:20:11.715 [http-nio-8093-exec-10] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:20:11.718 [http-nio-8093-exec-10] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615522,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:20:11","creatorId":100,"commentId":2011}
2026-01-31 13:20:11.719 [http-nio-8093-exec-10] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:20:11.719 [http-nio-8093-exec-10] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:20:11.721 [NettyClientPublicExecutor_3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5B61C70012, offsetMsgId=7F00000100002A9F0000000000002B79, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=5]
2026-01-31 13:20:11.723 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:20:11.723 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615522,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:20:11","creatorId":100,"commentId":2011}
2026-01-31 13:20:11.723 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:20:11.724 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long)
2026-01-31 13:20:11.725 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:20:11.725 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2011,"noteId":1862482047415615522,"userId":100,"contentUuid":"94901657-86e0-4e02-aee2-3d76f0fa8bad","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2008,"replyCommentId":2008,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:20:11","updateTime":"2026-01-31 13:20:11"}]
2026-01-31 13:20:11.726 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:20:11.727 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2011(Long), 1862482047415615522(Long), 100(Long), 94901657-86e0-4e02-aee2-3d76f0fa8bad(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2008(Long), 2008(Long), 100(Long), false(Boolean), 2026-01-31T13:20:11(LocalDateTime), 2026-01-31T13:20:11(LocalDateTime)
2026-01-31 13:20:11.727 [ConsumeMessageThread_greennote_group_PublishCommentTopic_10] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:20:11.762 [NettyClientPublicExecutor_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D5B61F00013, offsetMsgId=7F00000100002A9F0000000000002D72, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2026-01-31 13:26:08.164 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:26:08.165 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615525,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:26:08.166 [http-nio-8093-exec-2] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:26:08.170 [http-nio-8093-exec-2] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615525,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:26:08","creatorId":100,"commentId":2012}
2026-01-31 13:26:08.171 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 6ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:26:08.172 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:26:08.175 [NettyClientPublicExecutor_5] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D60D22B0014, offsetMsgId=7F00000100002A9F0000000000002F04, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=3], queueOffset=3]
2026-01-31 13:26:08.176 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:26:08.176 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615525,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:26:08","creatorId":100,"commentId":2012}
2026-01-31 13:26:08.177 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:26:08.178 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long)
2026-01-31 13:26:08.179 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:26:08.180 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2012,"noteId":1862482047415615525,"userId":100,"contentUuid":"9fefba74-513c-473b-ae06-7d8efcfdacde","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2008,"replyCommentId":2008,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:26:08","updateTime":"2026-01-31 13:26:08"}]
2026-01-31 13:26:08.181 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:26:08.182 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2012(Long), 1862482047415615525(Long), 100(Long), 9fefba74-513c-473b-ae06-7d8efcfdacde(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2008(Long), 2008(Long), 100(Long), false(Boolean), 2026-01-31T13:26:08(LocalDateTime), 2026-01-31T13:26:08(LocalDateTime)
2026-01-31 13:26:08.183 [ConsumeMessageThread_greennote_group_PublishCommentTopic_11] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:26:08.204 [NettyClientPublicExecutor_6] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D60D2490015, offsetMsgId=7F00000100002A9F00000000000030FD, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=1]
2026-01-31 13:26:11.297 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:26:11.298 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615526,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:26:11.298 [http-nio-8093-exec-3] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:26:11.301 [http-nio-8093-exec-3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615526,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:26:11","creatorId":100,"commentId":2013}
2026-01-31 13:26:11.302 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:26:11.302 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:26:11.305 [NettyClientPublicExecutor_7] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D60DE660016, offsetMsgId=7F00000100002A9F000000000000328F, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=3], queueOffset=4]
2026-01-31 13:26:11.306 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:26:11.306 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615526,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:26:11","creatorId":100,"commentId":2013}
2026-01-31 13:26:11.306 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:26:11.306 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long)
2026-01-31 13:26:11.308 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:26:11.308 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2013,"noteId":1862482047415615526,"userId":100,"contentUuid":"535bc83c-3105-486f-a3ad-83b22f3eeac3","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2008,"replyCommentId":2008,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:26:11","updateTime":"2026-01-31 13:26:11"}]
2026-01-31 13:26:11.309 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:26:11.310 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2013(Long), 1862482047415615526(Long), 100(Long), 535bc83c-3105-486f-a3ad-83b22f3eeac3(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2008(Long), 2008(Long), 100(Long), false(Boolean), 2026-01-31T13:26:11(LocalDateTime), 2026-01-31T13:26:11(LocalDateTime)
2026-01-31 13:26:11.312 [ConsumeMessageThread_greennote_group_PublishCommentTopic_12] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:26:11.345 [NettyClientPublicExecutor_8] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D60DE8F0017, offsetMsgId=7F00000100002A9F0000000000003488, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=4]
2026-01-31 13:26:15.205 [http-nio-8093-exec-8] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:26:15.205 [http-nio-8093-exec-8] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615527,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:26:15.206 [http-nio-8093-exec-8] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:26:15.209 [http-nio-8093-exec-8] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615527,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:26:15","creatorId":100,"commentId":2014}
2026-01-31 13:26:15.209 [http-nio-8093-exec-8] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:26:15.210 [http-nio-8093-exec-8] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:26:15.212 [NettyClientPublicExecutor_9] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D60EDA90018, offsetMsgId=7F00000100002A9F000000000000361A, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=6]
2026-01-31 13:26:15.213 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:26:15.213 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615527,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2008,"createTime":"2026-01-31 13:26:15","creatorId":100,"commentId":2014}
2026-01-31 13:26:15.214 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:26:15.214 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long)
2026-01-31 13:26:15.215 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:26:15.216 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2014,"noteId":1862482047415615527,"userId":100,"contentUuid":"a22d8238-3bb3-4d75-a99c-71c14844a11b","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2008,"replyCommentId":2008,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:26:15","updateTime":"2026-01-31 13:26:15"}]
2026-01-31 13:26:15.217 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:26:15.218 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2014(Long), 1862482047415615527(Long), 100(Long), a22d8238-3bb3-4d75-a99c-71c14844a11b(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2008(Long), 2008(Long), 100(Long), false(Boolean), 2026-01-31T13:26:15(LocalDateTime), 2026-01-31T13:26:15(LocalDateTime)
2026-01-31 13:26:15.219 [ConsumeMessageThread_greennote_group_PublishCommentTopic_13] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:26:15.252 [NettyClientPublicExecutor_10] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001088863947C6B9D60EDD20019, offsetMsgId=7F00000100002A9F0000000000003813, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=5]
2026-01-31 13:31:08.774 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 13:31:08.774 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 13:31:08.775 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 13:31:08.775 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 13:31:08.795 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 13:31:08.795 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 13:31:08.798 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@9d23b27[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 13:31:08.799 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769886880596_127.0.0.1_21471
2026-01-31 13:31:08.800 [nacos-grpc-client-executor-127.0.0.1-230] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769886880596_127.0.0.1_21471]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 13:31:08.802 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1de66da8[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 231]
2026-01-31 13:31:08.802 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@515bde4b[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 329]
2026-01-31 13:31:08.803 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 13:31:08.803 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 13:31:08.803 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 13:31:08.811 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 13:31:08.812 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 13:31:08.816 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 13:31:08.816 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 13:31:08.819 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 13:31:08.820 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 13:31:11.609 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:31:11.669 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:31:12.055 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:31:12.069 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:31:12.069 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 13:31:12.083 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 13:31:12.763 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=50fe2b79-44fa-3c0e-b359-44c016e3329f
2026-01-31 13:31:12.824 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:12.826 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.075 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.125 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.127 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.131 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.134 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x00000254114f23d0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.137 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.141 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.143 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:31:13.363 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 13:31:13.374 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 13:31:13.375 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 13:31:13.466 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 13:31:13.466 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1380 ms
2026-01-31 13:31:13.546 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 13:31:13.808 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 13:31:14.059 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 13:31:14.146 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 13:31:14.370 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 13:31:15.112 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 13:31:15.175 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 13:31:15.181 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:31:15.181 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 13:31:15.182 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 13:31:15.182 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 13:31:15.202 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 13:31:15.203 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 13:31:15.203 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 13:31:15.207 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 13:31:15.207 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 13:31:15.210 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 13:31:15.219 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of b60d4d55-37ca-450b-8811-f233aac4d096
2026-01-31 13:31:15.238 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 13:31:15.239 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 13:31:15.239 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 13:31:15.242 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 13:31:15.272 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 13:31:16.046 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769887875864_127.0.0.1_15868
2026-01-31 13:31:16.047 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Notify connected event to listeners.
2026-01-31 13:31:16.047 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 13:31:16.048 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 13:31:16.048 [main] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1115/0x00000254118fb520
2026-01-31 13:31:16.049 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 13:31:16.059 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 13:31:16.144 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.33 seconds (process running for 6.04)
2026-01-31 13:31:44.339 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 13:31:44.339 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 13:31:44.340 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 13:31:44.350 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:31:44.462 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615510,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:31:44.464 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:31:44.548 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 13:31:44.564 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 13:31:44.574 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 13:31:44.613 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615510,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:44","creatorId":100,"commentId":2015}
2026-01-31 13:31:44.623 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 163ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:31:44.636 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:31:44.644 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D65F47C0000, offsetMsgId=7F00000100002A9F00000000000039A5, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=7]
2026-01-31 13:31:44.646 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:31:44.649 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615510,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:44","creatorId":100,"commentId":2015}
2026-01-31 13:31:44.689 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:31:44.842 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 13:31:44.857 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:31:44.868 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2015,"noteId":1862482047415615510,"userId":100,"contentUuid":"96d3ee7a-ba70-4dc2-8d4a-166d9f401d5f","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:31:44","updateTime":"2026-01-31 13:31:44"}]
2026-01-31 13:31:44.877 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:31:44.962 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2015(Long), 1862482047415615510(Long), 100(Long), 96d3ee7a-ba70-4dc2-8d4a-166d9f401d5f(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T13:31:44(LocalDateTime), 2026-01-31T13:31:44(LocalDateTime)
2026-01-31 13:31:44.966 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:31:44.983 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 13:31:44.988 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 13:31:44.988 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 13:31:45.018 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D65F5F70001, offsetMsgId=7F00000100002A9F0000000000003B9E, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=2]
2026-01-31 13:31:45.150 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Receive server push request, request = NotifySubscriberRequest, requestId = 28
2026-01-31 13:31:45.151 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Ack server push request, request = NotifySubscriberRequest, requestId = 28
2026-01-31 13:31:45.569 [nacos-grpc-client-executor-127.0.0.1-21] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Receive server push request, request = NotifySubscriberRequest, requestId = 29
2026-01-31 13:31:45.570 [nacos-grpc-client-executor-127.0.0.1-21] INFO  com.alibaba.nacos.common.remote.client - [b60d4d55-37ca-450b-8811-f233aac4d096] Ack server push request, request = NotifySubscriberRequest, requestId = 29
2026-01-31 13:31:47.548 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:31:47.549 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615511,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:31:47.549 [http-nio-8093-exec-2] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:31:47.554 [http-nio-8093-exec-2] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615511,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:47","creatorId":100,"commentId":2016}
2026-01-31 13:31:47.554 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:31:47.556 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:31:47.558 [NettyClientPublicExecutor_3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D65FFE20002, offsetMsgId=7F00000100002A9F0000000000003D30, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=8]
2026-01-31 13:31:47.560 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:31:47.560 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615511,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:47","creatorId":100,"commentId":2016}
2026-01-31 13:31:47.561 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:31:47.561 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 13:31:47.562 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:31:47.563 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2016,"noteId":1862482047415615511,"userId":100,"contentUuid":"ef69cfbd-7018-4af4-9535-7f76564db47e","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:31:47","updateTime":"2026-01-31 13:31:47"}]
2026-01-31 13:31:47.564 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:31:47.565 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2016(Long), 1862482047415615511(Long), 100(Long), ef69cfbd-7018-4af4-9535-7f76564db47e(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T13:31:47(LocalDateTime), 2026-01-31T13:31:47(LocalDateTime)
2026-01-31 13:31:47.567 [ConsumeMessageThread_greennote_group_PublishCommentTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:31:47.596 [NettyClientPublicExecutor_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D6600090003, offsetMsgId=7F00000100002A9F0000000000003F29, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=3]
2026-01-31 13:31:50.868 [http-nio-8093-exec-9] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:31:50.870 [http-nio-8093-exec-9] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615512,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:31:50.870 [http-nio-8093-exec-9] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:31:50.872 [http-nio-8093-exec-9] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615512,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:50","creatorId":100,"commentId":2017}
2026-01-31 13:31:50.873 [http-nio-8093-exec-9] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:31:50.874 [http-nio-8093-exec-9] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:31:50.877 [NettyClientPublicExecutor_5] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D660CD90004, offsetMsgId=7F00000100002A9F00000000000040BB, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=3]
2026-01-31 13:31:50.878 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:31:50.879 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615512,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:50","creatorId":100,"commentId":2017}
2026-01-31 13:31:50.879 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:31:50.880 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 13:31:50.881 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:31:50.881 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2017,"noteId":1862482047415615512,"userId":100,"contentUuid":"e7c5efe2-2f57-40cb-9c5d-7b0dd34e730c","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:31:50","updateTime":"2026-01-31 13:31:50"}]
2026-01-31 13:31:50.882 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:31:50.882 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2017(Long), 1862482047415615512(Long), 100(Long), e7c5efe2-2f57-40cb-9c5d-7b0dd34e730c(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T13:31:50(LocalDateTime), 2026-01-31T13:31:50(LocalDateTime)
2026-01-31 13:31:50.883 [ConsumeMessageThread_greennote_group_PublishCommentTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:31:50.905 [NettyClientPublicExecutor_6] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D660CF50005, offsetMsgId=7F00000100002A9F00000000000042B4, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=6]
2026-01-31 13:31:53.707 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:31:53.708 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615513,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:31:53.708 [http-nio-8093-exec-4] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:31:53.712 [http-nio-8093-exec-4] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615513,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:53","creatorId":100,"commentId":2018}
2026-01-31 13:31:53.712 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:31:53.713 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:31:53.715 [NettyClientPublicExecutor_7] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D6617F00006, offsetMsgId=7F00000100002A9F0000000000004446, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=0], queueOffset=3]
2026-01-31 13:31:53.716 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:31:53.717 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615513,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:53","creatorId":100,"commentId":2018}
2026-01-31 13:31:53.718 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:31:53.719 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 13:31:53.720 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:31:53.721 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2018,"noteId":1862482047415615513,"userId":100,"contentUuid":"9db9b8dd-c63f-4a18-b356-450673c74e9d","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:31:53","updateTime":"2026-01-31 13:31:53"}]
2026-01-31 13:31:53.722 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:31:53.722 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2018(Long), 1862482047415615513(Long), 100(Long), 9db9b8dd-c63f-4a18-b356-450673c74e9d(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T13:31:53(LocalDateTime), 2026-01-31T13:31:53(LocalDateTime)
2026-01-31 13:31:53.725 [ConsumeMessageThread_greennote_group_PublishCommentTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:31:53.757 [NettyClientPublicExecutor_8] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D6618190007, offsetMsgId=7F00000100002A9F000000000000463F, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=4]
2026-01-31 13:31:56.647 [http-nio-8093-exec-5] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 13:31:56.649 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615514,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 13:31:56.649 [http-nio-8093-exec-5] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 13:31:56.652 [http-nio-8093-exec-5] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615514,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:56","creatorId":100,"commentId":2019}
2026-01-31 13:31:56.652 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 13:31:56.653 [http-nio-8093-exec-5] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 13:31:56.656 [NettyClientPublicExecutor_9] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D66236C0008, offsetMsgId=7F00000100002A9F00000000000047D1, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=0], queueOffset=4]
2026-01-31 13:31:56.657 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 13:31:56.657 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615514,"content":"这是一条测试二级评论z","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 13:31:56","creatorId":100,"commentId":2019}
2026-01-31 13:31:56.657 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id from t_comment where id in ( ? )
2026-01-31 13:31:56.658 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 13:31:56.659 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 13:31:56.659 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2019,"noteId":1862482047415615514,"userId":100,"contentUuid":"ab402508-0a04-40d4-9d32-1b6ac4217dc6","content":"这是一条测试二级评论z","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 13:31:56","updateTime":"2026-01-31 13:31:56"}]
2026-01-31 13:31:56.661 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 13:31:56.661 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2019(Long), 1862482047415615514(Long), 100(Long), ab402508-0a04-40d4-9d32-1b6ac4217dc6(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T13:31:56(LocalDateTime), 2026-01-31T13:31:56(LocalDateTime)
2026-01-31 13:31:56.663 [ConsumeMessageThread_greennote_group_PublishCommentTopic_5] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 13:31:56.682 [NettyClientPublicExecutor_10] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DD6463947C6B9D6623870009, offsetMsgId=7F00000100002A9F00000000000049CA, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=0], queueOffset=1]
2026-01-31 13:58:43.666 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 13:58:43.666 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 13:58:43.666 [Thread-10] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 13:58:43.667 [Thread-13] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 13:58:43.686 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 13:58:43.686 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 13:58:43.690 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1a363d7f[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 13:58:43.691 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769887875864_127.0.0.1_15868
2026-01-31 13:58:43.691 [nacos-grpc-client-executor-127.0.0.1-354] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769887875864_127.0.0.1_15868]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 13:58:43.693 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1ca7220c[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 355]
2026-01-31 13:58:43.693 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@415868ea[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 548]
2026-01-31 13:58:43.694 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 13:58:43.694 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 13:58:43.694 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 13:58:43.702 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 13:58:43.703 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 13:58:43.706 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 13:58:43.706 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 13:58:43.708 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 13:58:43.709 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 13:58:50.896 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:58:50.951 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:58:51.409 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:58:51.427 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 13:58:51.428 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 13:58:51.451 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 13:58:52.345 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=25aed801-190a-3432-a3aa-f60fe76f9355
2026-01-31 13:58:52.400 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.402 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.674 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.735 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.739 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.743 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.743 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x0000021a0c4f4bf8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.745 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.751 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:52.752 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 13:58:53.034 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 13:58:53.053 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 13:58:53.053 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 13:58:53.164 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 13:58:53.164 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1709 ms
2026-01-31 13:58:53.290 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 13:58:53.571 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 13:58:53.701 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'comment2DBConsumer': Injection of resource dependencies failed
2026-01-31 13:58:53.702 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 13:58:53.706 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 13:58:53.708 [main] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2026-01-31 13:58:53.729 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-31 13:58:53.760 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'comment2DBConsumer': Injection of resource dependencies failed
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:303)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.evan.greennote.comment.biz.GreenNoteCommentBizApplication.main(GreenNoteCommentBizApplication.java:16)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'commentDOMapper' defined in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\com\evan\greennote\comment\biz\domain\mapper\CommentDOMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory': Error creating bean with name 'sqlSessionFactory' defined in class path resource [org/mybatis/spring/boot/autoconfigure/MybatisAutoConfiguration.class]: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception with message: Failed to parse mapping resource: 'file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1494)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1388)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeanByName(AbstractAutowireCapableBeanFactory.java:458)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:496)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:467)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:618)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:242)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:300)
	... 17 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [org/mybatis/spring/boot/autoconfigure/MybatisAutoConfiguration.class]: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception with message: Failed to parse mapping resource: 'file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1479)
	... 31 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception with message: Failed to parse mapping resource: 'file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 44 common frames omitted
Caused by: java.io.IOException: Failed to parse mapping resource: 'file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]'
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:695)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:572)
	at org.mybatis.spring.SqlSessionFactoryBean.getObject(SqlSessionFactoryBean.java:712)
	at org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration.sqlSessionFactory(MybatisAutoConfiguration.java:189)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 45 common frames omitted
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. The XML location is 'file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]'. Cause: java.lang.IllegalArgumentException: Mapped Statements collection already contains value for com.evan.greennote.comment.biz.domain.mapper.CommentDOMapper.selectByCommentIds. please check file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml] and file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:128)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:100)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:693)
	... 53 common frames omitted
Caused by: java.lang.IllegalArgumentException: Mapped Statements collection already contains value for com.evan.greennote.comment.biz.domain.mapper.CommentDOMapper.selectByCommentIds. please check file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml] and file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentDOMapper.xml]
	at org.apache.ibatis.session.Configuration$StrictMap.put(Configuration.java:1071)
	at org.apache.ibatis.session.Configuration$StrictMap.put(Configuration.java:1024)
	at org.apache.ibatis.session.Configuration.addMappedStatement(Configuration.java:822)
	at org.apache.ibatis.builder.MapperBuilderAssistant.addMappedStatement(MapperBuilderAssistant.java:223)
	at org.apache.ibatis.builder.xml.XMLStatementBuilder.parseStatementNode(XMLStatementBuilder.java:120)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.buildStatementFromContext(XMLMapperBuilder.java:144)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.buildStatementFromContext(XMLMapperBuilder.java:136)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:126)
	... 55 common frames omitted
2026-01-31 14:01:12.661 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:01:12.730 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:01:13.093 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:01:13.104 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:01:13.104 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 14:01:13.119 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 14:01:13.722 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=25aed801-190a-3432-a3aa-f60fe76f9355
2026-01-31 14:01:13.774 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:13.777 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.010 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.054 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.056 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.058 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.059 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$695/0x0000022f934f4bf8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.060 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.065 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.065 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:01:14.283 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 14:01:14.294 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 14:01:14.295 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 14:01:14.391 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 14:01:14.391 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1270 ms
2026-01-31 14:01:14.473 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 14:01:14.741 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 14:01:14.975 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 14:01:15.045 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 14:01:15.343 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 14:01:15.343 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 14:01:15.367 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 14:01:15.939 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 14:01:16.000 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 14:01:16.005 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:01:16.005 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 14:01:16.006 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 14:01:16.006 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 14:01:16.027 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 14:01:16.027 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 14:01:16.028 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 14:01:16.032 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 14:01:16.032 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 14:01:16.035 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 14:01:16.044 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 5ec98f32-d07b-4c22-8203-987672355319
2026-01-31 14:01:16.061 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 14:01:16.061 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 14:01:16.062 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 14:01:16.063 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 14:01:16.091 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 14:01:16.837 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769889676657_127.0.0.1_32855
2026-01-31 14:01:16.837 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Notify connected event to listeners.
2026-01-31 14:01:16.837 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 14:01:16.839 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 14:01:16.839 [main] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1121/0x0000022f938fee78
2026-01-31 14:01:16.840 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 14:01:16.852 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 14:01:16.941 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 4.989 seconds (process running for 5.504)
2026-01-31 14:01:32.038 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 14:01:32.038 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 14:01:32.039 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 14:01:32.048 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 14:01:32.135 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615566,"content":"这是一条测试二级评论HEAT!","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 14:01:32.136 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 14:01:32.210 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 14:01:32.223 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 14:01:32.231 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 14:01:32.275 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615566,"content":"这是一条测试二级评论HEAT!","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 14:01:32","creatorId":100,"commentId":2020}
2026-01-31 14:01:32.283 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 148ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 14:01:32.298 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 14:01:32.308 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001C68C63947C6B9D813B880000, offsetMsgId=7F00000100002A9F0000000000004B5C, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=4]
2026-01-31 14:01:32.311 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 14:01:32.314 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615566,"content":"这是一条测试二级评论HEAT!","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 14:01:32","creatorId":100,"commentId":2020}
2026-01-31 14:01:32.357 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id, child_comment_total, like_total from t_comment where id in ( ? )
2026-01-31 14:01:32.499 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 14:01:32.518 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 14:01:32.529 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2020,"noteId":1862482047415615566,"userId":100,"contentUuid":"b236b06b-ee85-471f-9180-0b492db1a4ee","content":"这是一条测试二级评论HEAT!","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 14:01:32","updateTime":"2026-01-31 14:01:32"}]
2026-01-31 14:01:32.536 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 14:01:32.620 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2020(Long), 1862482047415615566(Long), 100(Long), b236b06b-ee85-471f-9180-0b492db1a4ee(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T14:01:32(LocalDateTime), 2026-01-31T14:01:32(LocalDateTime)
2026-01-31 14:01:32.629 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 14:01:32.647 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 14:01:32.650 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 14:01:32.652 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 14:01:32.703 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001C68C63947C6B9D813D1C0001, offsetMsgId=7F00000100002A9F0000000000004D59, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=5]
2026-01-31 14:01:32.770 [nacos-grpc-client-executor-127.0.0.1-15] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Receive server push request, request = NotifySubscriberRequest, requestId = 32
2026-01-31 14:01:32.771 [nacos-grpc-client-executor-127.0.0.1-15] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Ack server push request, request = NotifySubscriberRequest, requestId = 32
2026-01-31 14:01:33.190 [nacos-grpc-client-executor-127.0.0.1-16] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Receive server push request, request = NotifySubscriberRequest, requestId = 33
2026-01-31 14:01:33.191 [nacos-grpc-client-executor-127.0.0.1-16] INFO  com.alibaba.nacos.common.remote.client - [5ec98f32-d07b-4c22-8203-987672355319] Ack server push request, request = NotifySubscriberRequest, requestId = 33
2026-01-31 14:01:59.325 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-01-31 14:01:59.325 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-01-31 14:01:59.330 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-01-31 14:01:59.331 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id, child_comment_total, like_total from t_comment where id in ( ? )
2026-01-31 14:01:59.331 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 14:01:59.332 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 14:01:59.335 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-01-31 14:01:59.337 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 1.8(Double), 2001(Long)
2026-01-31 14:01:59.345 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-01-31 14:54:46.792 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 14:54:46.792 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 14:54:46.793 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 14:54:46.794 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 14:54:46.806 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 14:54:46.807 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 14:54:46.829 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 14:54:46.829 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@70499c41[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 14:54:46.833 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769889676657_127.0.0.1_32855
2026-01-31 14:54:46.834 [nacos-grpc-client-executor-127.0.0.1-670] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769889676657_127.0.0.1_32855]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 14:54:46.837 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@4a786c95[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 671]
2026-01-31 14:54:46.837 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@2c86dfe6[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 1069]
2026-01-31 14:54:46.837 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 14:54:46.837 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 14:54:46.837 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 14:54:46.843 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 14:54:46.843 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 14:54:46.843 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 14:54:46.848 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 14:54:46.848 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 14:54:46.851 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 14:54:46.852 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 14:54:53.778 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:54:53.845 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:54:54.307 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:54:54.321 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:54:54.321 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 14:54:54.344 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 14:54:55.095 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 14:54:55.100 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 14:54:55.134 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2026-01-31 14:54:55.441 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=83c9b227-515b-3fb7-bc23-f5fc4026f29a
2026-01-31 14:54:55.503 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.505 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.784 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.843 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.846 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.850 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.851 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000001d9895459f0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.852 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.859 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:55.860 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 14:54:56.117 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 14:54:56.128 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 14:54:56.128 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 14:54:56.221 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 14:54:56.222 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1873 ms
2026-01-31 14:54:56.314 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 14:54:56.586 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 14:54:56.826 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 14:54:56.898 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 14:54:57.271 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 14:54:57.271 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 14:54:57.561 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 14:54:57.562 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 14:54:57.587 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 14:54:58.254 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 14:54:58.318 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 14:54:58.325 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 14:54:58.325 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 14:54:58.325 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 14:54:58.326 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 14:54:58.350 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 14:54:58.350 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 14:54:58.351 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 14:54:58.355 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 14:54:58.355 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 14:54:58.359 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 14:54:58.366 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 41e58494-15b1-4cbd-9822-4e6362cc6509
2026-01-31 14:54:58.384 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 14:54:58.384 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 14:54:58.384 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 14:54:58.386 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 14:54:58.413 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 14:54:58.602 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, size: 20
2026-01-31 14:54:58.605 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, ["[{\"noteId\":1862482047415615526,\"commentId\":2013,\"level\":2,\"parentId\":2008}]","[{\"noteId\":1862482047415615522,\"commentId\":2010,\"level\":2,\"parentId\":2008}]","[{\"noteId\":1862482047415615521,\"commentId\":2003,\"level\":1,\"parentId\":1862482047415615521}]","[{\"noteId\":1862482047415615522,\"commentId\":2008,\"level\":1,\"parentId\":1862482047415615522}]","[{\"noteId\":1862482047415615525,\"commentId\":2012,\"level\":2,\"parentId\":2008}]","[{\"noteId\":1862482047415615522,\"commentId\":2005,\"level\":1,\"parentId\":1862482047415615522}]","[{\"noteId\":1862482047415615511,\"commentId\":2016,\"level\":2,\"parentId\":2001}]","[{\"noteId\":1862482047415615513,\"commentId\":2018,\"level\":2,\"parentId\":2001}]","[{\"noteId\":1862482047415615522,\"commentId\":2004,\"level\":1,\"parentId\":1862482047415615522}]","[{\"noteId\":1862482047415615510,\"commentId\":2015,\"level\":2,\"parentId\":2001}]","[{\"noteId\":1862482047415615522,\"commentId\":2006,\"level\":1,\"parentId\":1862482047415615522}]","[{\"noteId\":1862482047415615514,\"commentId\":2019,\"level\":2,\"parentId\":2001}]","[{\"noteId\":1862482047415615522,\"commentId\":2011,\"level\":2,\"parentId\":2008}]","[{\"noteId\":1862482047415615520,\"commentId\":2002,\"level\":1,\"parentId\":1862482047415615520}]","[{\"noteId\":1862482047415615522,\"commentId\":2007,\"level\":1,\"parentId\":1862482047415615522}]","[{\"noteId\":1862482047415615529,\"commentId\":2001,\"level\":1,\"parentId\":1862482047415615529}]","[{\"noteId\":1862482047415615522,\"commentId\":2009,\"level\":2,\"parentId\":2008}]","[{\"noteId\":1862482047415615566,\"commentId\":2020,\"level\":2,\"parentId\":2001}]","[{\"noteId\":1862482047415615527,\"commentId\":2014,\"level\":2,\"parentId\":2008}]","[{\"noteId\":1862482047415615512,\"commentId\":2017,\"level\":2,\"parentId\":2001}]"]
2026-01-31 14:54:58.949 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id, child_comment_total, like_total, first_reply_comment_id from t_comment where id in ( ? , ? )
2026-01-31 14:54:59.102 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2008(Long), 2001(Long)
2026-01-31 14:54:59.120 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 2
2026-01-31 14:54:59.123 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.selectEarliestByParentId - ==>  Preparing: select id from t_comment where parent_id = ? and level = 2 order by create_time asc limit 1
2026-01-31 14:54:59.127 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.selectEarliestByParentId - ==> Parameters: 2001(Long)
2026-01-31 14:54:59.130 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.selectEarliestByParentId - <==      Total: 1
2026-01-31 14:54:59.130 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.updateFirstReplyCommentIdByPrimaryKey - ==>  Preparing: update t_comment set first_reply_comment_id = ? where id = ?
2026-01-31 14:54:59.132 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.updateFirstReplyCommentIdByPrimaryKey - ==> Parameters: 2015(Long), 2001(Long)
2026-01-31 14:54:59.141 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.updateFirstReplyCommentIdByPrimaryKey - <==    Updates: 1
2026-01-31 14:54:59.142 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.selectEarliestByParentId - ==>  Preparing: select id from t_comment where parent_id = ? and level = 2 order by create_time asc limit 1
2026-01-31 14:54:59.143 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.selectEarliestByParentId - ==> Parameters: 2008(Long)
2026-01-31 14:54:59.144 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.selectEarliestByParentId - <==      Total: 1
2026-01-31 14:54:59.144 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.updateFirstReplyCommentIdByPrimaryKey - ==>  Preparing: update t_comment set first_reply_comment_id = ? where id = ?
2026-01-31 14:54:59.145 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.updateFirstReplyCommentIdByPrimaryKey - ==> Parameters: 2009(Long), 2008(Long)
2026-01-31 14:54:59.151 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.updateFirstReplyCommentIdByPrimaryKey - <==    Updates: 1
2026-01-31 14:54:59.215 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769892899023_127.0.0.1_41717
2026-01-31 14:54:59.216 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Notify connected event to listeners.
2026-01-31 14:54:59.216 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 14:54:59.216 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 14:54:59.216 [main] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1415/0x000001d989a7d870
2026-01-31 14:54:59.217 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 14:54:59.228 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 14:54:59.327 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 6.148 seconds (process running for 6.61)
2026-01-31 14:58:01.373 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 14:58:01.374 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 14:58:01.375 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 14:58:01.383 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 14:58:01.486 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615566,"content":"这是一条测试二级评论EARLY","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 14:58:01.488 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 14:58:01.552 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 14:58:01.561 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 14:58:01.570 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 14:58:01.619 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615566,"content":"这是一条测试二级评论EARLY","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 14:58:01","creatorId":100,"commentId":2021}
2026-01-31 14:58:01.625 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 140ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 14:58:01.638 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015AC063947C6B9DB4F31B0000, offsetMsgId=7F00000100002A9F0000000000005039, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=0], queueOffset=5]
2026-01-31 14:58:01.639 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 14:58:01.641 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615566,"content":"这是一条测试二级评论EARLY","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 14:58:01","creatorId":100,"commentId":2021}
2026-01-31 14:58:01.641 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 14:58:01.643 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id, child_comment_total, like_total, first_reply_comment_id from t_comment where id in ( ? )
2026-01-31 14:58:01.644 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 14:58:01.646 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 14:58:01.654 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2021,"noteId":1862482047415615566,"userId":100,"contentUuid":"c8efa5e8-87ac-4fcc-9391-8f9a14608ca7","content":"这是一条测试二级评论EARLY","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 14:58:01","updateTime":"2026-01-31 14:58:01"}]
2026-01-31 14:58:01.661 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 14:58:01.757 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2021(Long), 1862482047415615566(Long), 100(Long), c8efa5e8-87ac-4fcc-9391-8f9a14608ca7(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T14:58:01(LocalDateTime), 2026-01-31T14:58:01(LocalDateTime)
2026-01-31 14:58:01.761 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 14:58:01.781 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 14:58:01.785 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 14:58:01.786 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 14:58:01.855 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015AC063947C6B9DB4F3FA0001, offsetMsgId=7F00000100002A9F0000000000005236, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=7]
2026-01-31 14:58:02.093 [nacos-grpc-client-executor-127.0.0.1-53] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Receive server push request, request = NotifySubscriberRequest, requestId = 36
2026-01-31 14:58:02.094 [nacos-grpc-client-executor-127.0.0.1-53] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Ack server push request, request = NotifySubscriberRequest, requestId = 36
2026-01-31 14:58:02.301 [nacos-grpc-client-executor-127.0.0.1-54] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Receive server push request, request = NotifySubscriberRequest, requestId = 37
2026-01-31 14:58:02.301 [nacos-grpc-client-executor-127.0.0.1-54] INFO  com.alibaba.nacos.common.remote.client - [41e58494-15b1-4cbd-9822-4e6362cc6509] Ack server push request, request = NotifySubscriberRequest, requestId = 37
2026-01-31 14:58:02.545 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, size: 1
2026-01-31 14:58:02.545 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, ["[{\"noteId\":1862482047415615566,\"commentId\":2021,\"level\":2,\"parentId\":2001}]"]
2026-01-31 14:58:05.126 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-01-31 14:58:05.126 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-01-31 14:58:05.130 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-01-31 14:58:05.130 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, level, parent_id, user_id, child_comment_total, like_total, first_reply_comment_id from t_comment where id in ( ? )
2026-01-31 14:58:05.131 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 14:58:05.132 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 14:58:05.134 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-01-31 14:58:05.135 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 2.1(Double), 2001(Long)
2026-01-31 14:58:05.143 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-01-31 16:03:04.842 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 16:03:04.842 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 16:03:04.844 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 16:03:04.845 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 16:03:04.870 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:03:04.870 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:03:04.876 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:03:04.876 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:03:04.916 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 16:03:04.916 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 16:03:04.922 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 16:03:04.923 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2178df59[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 16:03:04.924 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769892899023_127.0.0.1_41717
2026-01-31 16:03:04.925 [nacos-grpc-client-executor-127.0.0.1-841] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769892899023_127.0.0.1_41717]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 16:03:04.929 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@2f90ee35[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 842]
2026-01-31 16:03:04.929 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@251b718a[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 1361]
2026-01-31 16:03:04.929 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 16:03:04.929 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 16:03:04.929 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 16:03:04.936 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:03:04.936 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:03:04.936 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:03:05.072 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:03:05.079 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:03:05.079 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:03:05.083 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 16:03:05.085 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 16:03:13.491 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:03:13.564 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:03:13.924 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:03:13.936 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:03:13.937 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 16:03:13.953 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 16:03:14.765 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 16:03:14.769 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 16:03:14.825 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2026-01-31 16:03:15.243 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=e04ba01a-365a-3859-bd19-9d56afab0249
2026-01-31 16:03:15.299 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.304 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.306 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.762 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.837 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.842 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.853 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.855 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000001bb44544780] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.858 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.873 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:15.875 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:03:16.184 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 16:03:16.200 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 16:03:16.200 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 16:03:16.307 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 16:03:16.307 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2351 ms
2026-01-31 16:03:16.418 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 16:03:16.729 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 16:03:17.016 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 16:03:17.112 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 16:03:17.624 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:03:17.624 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 16:03:18.239 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:03:18.239 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 16:03:18.282 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 16:03:18.312 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 16:03:19.243 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 16:03:19.338 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 16:03:19.345 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:03:19.345 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 16:03:19.346 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 16:03:19.347 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 16:03:19.371 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 16:03:19.371 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 16:03:19.372 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 16:03:19.377 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 16:03:19.377 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 16:03:19.382 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 16:03:19.394 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of ba3ae65c-77d2-4403-932e-1296c8bc65dc
2026-01-31 16:03:19.422 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 16:03:19.422 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 16:03:19.423 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 16:03:19.425 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 16:03:19.465 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 16:03:20.342 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769897000149_127.0.0.1_1280
2026-01-31 16:03:20.342 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Notify connected event to listeners.
2026-01-31 16:03:20.342 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 16:03:20.342 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 16:03:20.342 [main] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1284/0x000001bb4499f910
2026-01-31 16:03:20.343 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 16:03:20.356 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 16:03:20.449 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 7.568 seconds (process running for 8.003)
2026-01-31 16:03:53.638 [http-nio-8093-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 16:03:53.638 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 16:03:53.639 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 16:03:53.724 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-01-31 16:03:53.745 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==>  Preparing: select comment_total from t_note_count where note_id = ?
2026-01-31 16:03:53.872 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==> Parameters: 1862482047415615529(Long)
2026-01-31 16:03:53.891 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - <==      Total: 1
2026-01-31 16:03:53.895 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total from t_comment where note_id = ? and level = 1 order by heat desc limit ?, ?
2026-01-31 16:03:53.900 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==> Parameters: 1862482047415615529(Long), 0(Long), 10(Long)
2026-01-31 16:03:53.905 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - <==      Total: 1
2026-01-31 16:03:53.920 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, create_time from t_comment where id in ( ? )
2026-01-31 16:03:53.921 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==> Parameters: 2015(Long)
2026-01-31 16:03:53.921 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - <==      Total: 1
2026-01-31 16:03:53.995 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 16:03:54.008 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 16:03:54.015 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 16:03:54.424 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-user, group:DEFAULT_GROUP, clusters: 
2026-01-31 16:03:54.427 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 16:03:54.427 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 16:03:54.549 [nacos-grpc-client-executor-127.0.0.1-18] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Receive server push request, request = NotifySubscriberRequest, requestId = 40
2026-01-31 16:03:54.549 [nacos-grpc-client-executor-127.0.0.1-18] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Ack server push request, request = NotifySubscriberRequest, requestId = 40
2026-01-31 16:03:54.767 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 1043ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":7,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"2小时前","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null}}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-01-31 16:03:54.974 [nacos-grpc-client-executor-127.0.0.1-19] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Receive server push request, request = NotifySubscriberRequest, requestId = 41
2026-01-31 16:03:54.974 [nacos-grpc-client-executor-127.0.0.1-19] INFO  com.alibaba.nacos.common.remote.client - [ba3ae65c-77d2-4403-932e-1296c8bc65dc] Ack server push request, request = NotifySubscriberRequest, requestId = 41
2026-01-31 16:42:24.100 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 16:42:24.100 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 16:42:24.101 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 16:42:24.102 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 16:42:24.117 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:42:24.118 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:42:24.122 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:42:24.122 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:42:24.153 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 16:42:24.153 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 16:42:24.155 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@30159a87[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 16:42:24.156 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769897000149_127.0.0.1_1280
2026-01-31 16:42:24.157 [nacos-grpc-client-executor-127.0.0.1-489] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769897000149_127.0.0.1_1280]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 16:42:24.164 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@6b1af6f3[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 490]
2026-01-31 16:42:24.164 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@2fa7b875[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 780]
2026-01-31 16:42:24.164 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 16:42:24.164 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 16:42:24.164 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 16:42:24.170 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:42:24.171 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:42:24.171 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:42:24.184 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:42:24.189 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 16:42:24.189 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 16:42:24.192 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 16:42:24.193 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 16:42:29.426 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:42:29.486 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:42:29.853 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:42:29.867 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:42:29.868 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 16:42:29.890 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 16:42:30.455 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 16:42:30.458 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 16:42:30.484 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2026-01-31 16:42:30.691 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=e04ba01a-365a-3859-bd19-9d56afab0249
2026-01-31 16:42:30.728 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:30.730 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:30.731 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:30.969 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.027 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.032 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.035 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.036 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000001a4625457f8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.039 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.044 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.045 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 16:42:31.298 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 16:42:31.309 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 16:42:31.309 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 16:42:31.427 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 16:42:31.427 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1533 ms
2026-01-31 16:42:31.513 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 16:42:31.789 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 16:42:32.089 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 16:42:32.153 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 16:42:32.519 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:42:32.520 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 16:42:32.817 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 16:42:32.817 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 16:42:32.844 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 16:42:32.860 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 16:42:33.519 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2026-01-31 16:42:33.588 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 16:42:33.601 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 16:42:33.601 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 16:42:33.602 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 16:42:33.602 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 16:42:33.625 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 16:42:33.625 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 16:42:33.626 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 16:42:33.631 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 16:42:33.631 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 16:42:33.634 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 16:42:33.645 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of f125b6a0-9de0-4176-b4ff-2fa6c705ffbf
2026-01-31 16:42:33.665 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 16:42:33.665 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 16:42:33.665 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 16:42:33.668 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 16:42:33.698 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 16:42:34.637 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769899354436_127.0.0.1_33785
2026-01-31 16:42:34.638 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Notify connected event to listeners.
2026-01-31 16:42:34.638 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 16:42:34.638 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 16:42:34.639 [main] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1284/0x000001a46299e608
2026-01-31 16:42:34.640 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 16:42:34.653 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 16:42:34.739 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.905 seconds (process running for 6.381)
2026-01-31 16:44:29.559 [http-nio-8093-exec-6] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 16:44:29.559 [http-nio-8093-exec-6] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 16:44:29.560 [http-nio-8093-exec-6] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 16:44:29.656 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-01-31 16:44:29.936 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==>  Preparing: select comment_total from t_note_count where note_id = ?
2026-01-31 16:44:30.130 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==> Parameters: 1862482047415615529(Long)
2026-01-31 16:44:30.156 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - <==      Total: 1
2026-01-31 16:44:30.171 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - ==>  Preparing: select id, heat from t_comment where note_id = ? and level = 1 order by heat desc limit 500
2026-01-31 16:44:30.171 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, heat from t_comment where note_id = ? and level = 1 order by heat desc limit ?, ?
2026-01-31 16:44:30.177 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - ==> Parameters: 1862482047415615529(Long)
2026-01-31 16:44:30.177 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==> Parameters: 1862482047415615529(Long), 0(Long), 10(Long)
2026-01-31 16:44:30.182 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - <==      Total: 1
2026-01-31 16:44:30.185 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - <==      Total: 1
2026-01-31 16:44:30.211 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, create_time, heat from t_comment where id in ( ? )
2026-01-31 16:44:30.213 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==> Parameters: 2015(Long)
2026-01-31 16:44:30.215 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - <==      Total: 1
2026-01-31 16:44:30.311 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 16:44:30.323 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 16:44:30.332 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 16:44:30.699 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-user, group:DEFAULT_GROUP, clusters: 
2026-01-31 16:44:30.702 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 16:44:30.702 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 16:44:30.744 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 1087ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":7,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null,"heat":0.0},"heat":2.1}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-01-31 16:44:30.912 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Receive server push request, request = NotifySubscriberRequest, requestId = 44
2026-01-31 16:44:30.914 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Ack server push request, request = NotifySubscriberRequest, requestId = 44
2026-01-31 16:44:31.231 [nacos-grpc-client-executor-127.0.0.1-40] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Receive server push request, request = NotifySubscriberRequest, requestId = 45
2026-01-31 16:44:31.232 [nacos-grpc-client-executor-127.0.0.1-40] INFO  com.alibaba.nacos.common.remote.client - [f125b6a0-9de0-4176-b4ff-2fa6c705ffbf] Ack server push request, request = NotifySubscriberRequest, requestId = 45
2026-01-31 16:46:43.213 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-01-31 16:46:43.232 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 19ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":7,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null,"heat":0.0},"heat":2.1}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-01-31 17:11:56.243 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 17:11:56.243 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 17:11:56.244 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 17:11:56.244 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 17:11:56.252 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:11:56.252 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:11:56.255 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:11:56.255 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:11:56.276 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 17:11:56.277 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2f082cef[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 17:11:56.280 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769899354436_127.0.0.1_33785
2026-01-31 17:11:56.280 [nacos-grpc-client-executor-127.0.0.1-374] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769899354436_127.0.0.1_33785]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 17:11:56.283 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@63290284[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 375]
2026-01-31 17:11:56.283 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@cc4d7ae[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 587]
2026-01-31 17:11:56.283 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 17:11:56.283 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 17:11:56.283 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 17:11:56.288 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:11:56.289 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:11:56.289 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:11:56.407 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:11:56.412 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:11:56.412 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:11:56.415 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 17:11:56.416 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 17:12:03.587 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:12:03.644 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:12:04.018 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:12:04.030 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:12:04.031 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 17:12:04.044 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 17:12:04.560 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 17:12:04.564 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 17:12:04.584 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2026-01-31 17:12:04.784 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-01-31 17:12:04.832 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:04.834 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:04.835 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.074 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.126 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.128 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.132 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.135 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x0000016db95449d0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.137 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.142 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.142 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:12:05.364 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 17:12:05.374 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 17:12:05.374 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 17:12:05.468 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 17:12:05.469 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1423 ms
2026-01-31 17:12:05.547 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 17:12:05.800 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 17:12:06.065 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:12:06.133 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 17:12:06.481 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:12:06.481 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 17:12:06.771 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:12:06.772 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 17:12:06.821 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:12:06.837 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:12:07.550 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 17:12:07.557 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:12:07.557 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 17:12:07.557 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 17:12:07.558 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 17:12:07.579 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 17:12:07.579 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 17:12:07.580 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 17:12:07.583 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 17:12:07.583 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 17:12:07.585 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 17:12:07.592 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6
2026-01-31 17:12:07.610 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 17:12:07.610 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 17:12:07.610 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 17:12:07.612 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 17:12:07.640 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 17:12:08.394 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769901128206_127.0.0.1_22922
2026-01-31 17:12:08.395 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Notify connected event to listeners.
2026-01-31 17:12:08.395 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 17:12:08.395 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 17:12:08.396 [main] INFO  com.alibaba.nacos.common.remote.client - [f5a4e9ee-2fee-4268-a420-d4d1e0bb1ce6] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1291/0x0000016db99ae5e8
2026-01-31 17:12:08.397 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 17:12:08.409 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 17:12:08.499 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.494 seconds (process running for 5.921)
2026-01-31 17:12:44.187 [http-nio-8093-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 17:12:44.187 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 17:12:44.188 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 17:12:44.273 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-01-31 17:12:44.512 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 239ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":7,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"3小时前","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null,"heat":0.0},"heat":2.1}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-01-31 17:25:42.826 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 17:25:42.826 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 17:25:42.826 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 17:25:42.827 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 17:25:42.836 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:25:42.837 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:25:42.840 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:25:42.840 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:25:42.868 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 17:25:42.868 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 17:25:42.871 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 17:25:42.871 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 17:25:42.871 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@32851cf6[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 17:25:42.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769901128206_127.0.0.1_22922
2026-01-31 17:25:42.872 [nacos-grpc-client-executor-127.0.0.1-178] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769901128206_127.0.0.1_22922]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 17:25:42.876 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7b7f2327[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 179]
2026-01-31 17:25:42.876 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@21628771[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 271]
2026-01-31 17:25:42.876 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 17:25:42.876 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 17:25:42.876 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 17:25:42.881 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:25:42.881 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:25:42.881 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:25:43.008 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:25:43.012 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:25:43.012 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:25:43.014 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 17:25:43.019 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 17:25:47.317 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:25:47.372 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:25:47.732 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:25:47.745 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:25:47.746 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 17:25:47.758 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 17:25:48.263 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 17:25:48.266 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 17:25:48.286 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2026-01-31 17:25:48.495 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-01-31 17:25:48.540 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.541 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.542 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.781 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.829 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.832 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.837 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.838 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x00000262df544530] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.840 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.844 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:48.845 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:25:49.078 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 17:25:49.087 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 17:25:49.087 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 17:25:49.182 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 17:25:49.183 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1423 ms
2026-01-31 17:25:49.269 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 17:25:49.527 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 17:25:49.789 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:25:49.868 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 17:25:50.370 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:25:50.370 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 17:25:50.415 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:25:50.415 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 17:25:50.472 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:25:50.498 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:25:51.234 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 17:25:51.239 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:25:51.239 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 17:25:51.239 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 17:25:51.240 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 17:25:51.263 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 17:25:51.263 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 17:25:51.264 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 17:25:51.267 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 17:25:51.267 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 17:25:51.270 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 17:25:51.279 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of e4506a53-9baf-429e-a2b9-9737d43eaa34
2026-01-31 17:25:51.297 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 17:25:51.297 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 17:25:51.297 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 17:25:51.299 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 17:25:51.328 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 17:25:52.068 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769901951881_127.0.0.1_3167
2026-01-31 17:25:52.071 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Notify connected event to listeners.
2026-01-31 17:25:52.071 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 17:25:52.071 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 17:25:52.071 [main] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1290/0x00000262df9af0a0
2026-01-31 17:25:52.073 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 17:25:52.092 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 17:25:52.189 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.454 seconds (process running for 5.872)
2026-01-31 17:27:37.476 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 17:27:37.476 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 17:27:37.476 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2026-01-31 17:27:37.484 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 17:27:37.564 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615588,"content":"这是一条测试1级评论111","imageUrl":null,"replyCommentId":null}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 17:27:37.566 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 17:27:37.629 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 17:27:37.644 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:27:37.652 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:27:37.754 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615588,"content":"这是一条测试1级评论111","imageUrl":null,"replyCommentId":null,"createTime":"2026-01-31 17:27:37","creatorId":100,"commentId":2022}
2026-01-31 17:27:37.762 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 198ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 17:27:37.778 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 17:27:37.794 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000183A463947C6B9E3DEA300000, offsetMsgId=7F00000100002A9F0000000000005516, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=5]
2026-01-31 17:27:37.797 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 17:27:37.800 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615588,"content":"这是一条测试1级评论111","imageUrl":null,"replyCommentId":null,"createTime":"2026-01-31 17:27:37","creatorId":100,"commentId":2022}
2026-01-31 17:27:37.814 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2022,"noteId":1862482047415615588,"userId":100,"contentUuid":"b7d6804e-f65b-45ff-932e-2d2f864a6c51","content":"这是一条测试1级评论111","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615588,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 17:27:37","updateTime":"2026-01-31 17:27:37"}]
2026-01-31 17:27:37.856 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 17:27:38.084 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2022(Long), 1862482047415615588(Long), 100(Long), b7d6804e-f65b-45ff-932e-2d2f864a6c51(String), false(Boolean), (String), 1(Integer), 0(Long), 0(Long), 1862482047415615588(Long), 0(Long), 0(Long), false(Boolean), 2026-01-31T17:27:37(LocalDateTime), 2026-01-31T17:27:37(LocalDateTime)
2026-01-31 17:27:38.093 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 17:27:38.115 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 17:27:38.118 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:27:38.118 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:27:38.234 [nacos-grpc-client-executor-127.0.0.1-36] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Receive server push request, request = NotifySubscriberRequest, requestId = 50
2026-01-31 17:27:38.235 [nacos-grpc-client-executor-127.0.0.1-36] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Ack server push request, request = NotifySubscriberRequest, requestId = 50
2026-01-31 17:27:38.505 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000183A463947C6B9E3DED040001, offsetMsgId=7F00000100002A9F000000000000570F, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=5]
2026-01-31 17:27:38.655 [nacos-grpc-client-executor-127.0.0.1-37] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Receive server push request, request = NotifySubscriberRequest, requestId = 51
2026-01-31 17:27:38.655 [nacos-grpc-client-executor-127.0.0.1-37] INFO  com.alibaba.nacos.common.remote.client - [e4506a53-9baf-429e-a2b9-9737d43eaa34] Ack server push request, request = NotifySubscriberRequest, requestId = 51
2026-01-31 17:27:39.528 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, size: 1
2026-01-31 17:27:39.529 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, ["[{\"noteId\":1862482047415615588,\"commentId\":2022,\"level\":1,\"parentId\":1862482047415615588}]"]
2026-01-31 17:32:25.057 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 17:32:25.057 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 17:32:25.057 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 17:32:25.057 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 17:32:25.066 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:32:25.067 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:32:25.070 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:32:25.070 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:32:25.088 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 17:32:25.088 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 17:32:25.092 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 17:32:25.092 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 17:32:25.092 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 17:32:25.092 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@7ba55c01[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 17:32:25.093 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769901951881_127.0.0.1_3167
2026-01-31 17:32:25.094 [nacos-grpc-client-executor-127.0.0.1-98] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769901951881_127.0.0.1_3167]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 17:32:25.096 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3a69bbd7[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 99]
2026-01-31 17:32:25.096 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@296c4199[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 131]
2026-01-31 17:32:25.096 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 17:32:25.096 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 17:32:25.096 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 17:32:25.102 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:32:25.102 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:32:25.102 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:32:25.103 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:32:25.224 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:32:25.224 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:32:25.226 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 17:32:25.232 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 17:32:29.654 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:32:29.720 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:32:30.081 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:32:30.093 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:32:30.093 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 17:32:30.107 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 17:32:30.609 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 17:32:30.613 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 17:32:30.633 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2026-01-31 17:32:30.857 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-01-31 17:32:30.896 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:30.897 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:30.898 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.117 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.167 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.170 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.175 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.176 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x00000227575449d0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.177 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.182 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.182 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 17:32:31.424 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 17:32:31.433 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 17:32:31.433 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 17:32:31.526 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 17:32:31.526 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1417 ms
2026-01-31 17:32:31.602 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 17:32:31.853 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 17:32:32.112 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:32:32.179 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 17:32:32.701 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:32:32.701 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 17:32:32.744 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:32:32.744 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 17:32:32.798 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:32:32.815 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 17:32:33.540 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 17:32:33.545 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 17:32:33.545 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 17:32:33.546 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 17:32:33.546 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 17:32:33.569 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 17:32:33.569 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 17:32:33.570 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 17:32:33.575 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 17:32:33.576 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 17:32:33.578 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 17:32:33.586 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 9b310f54-074f-4d1a-8db1-9fec167064c7
2026-01-31 17:32:33.605 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 17:32:33.605 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 17:32:33.606 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 17:32:33.607 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 17:32:33.636 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 17:32:34.375 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769902354183_127.0.0.1_7067
2026-01-31 17:32:34.376 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Notify connected event to listeners.
2026-01-31 17:32:34.376 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 17:32:34.376 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 17:32:34.376 [main] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1290/0x00000227579ad180
2026-01-31 17:32:34.377 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 17:32:34.388 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 17:32:34.478 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.45 seconds (process running for 5.901)
2026-01-31 17:33:06.106 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 17:33:06.106 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 17:33:06.107 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 17:33:06.116 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 17:33:06.208 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615599,"content":"这是一条测试2级评论222","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 17:33:06.211 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 17:33:06.277 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 17:33:06.290 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:33:06.298 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:33:06.340 [http-nio-8093-exec-1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615599,"content":"这是一条测试2级评论222","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 17:33:06","creatorId":100,"commentId":2023}
2026-01-31 17:33:06.347 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 140ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 17:33:06.362 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 17:33:06.371 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001BE8863947C6B9E42EDB90000, offsetMsgId=7F00000100002A9F00000000000058B0, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=2], queueOffset=9]
2026-01-31 17:33:06.373 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 17:33:06.376 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615599,"content":"这是一条测试2级评论222","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 17:33:06","creatorId":100,"commentId":2023}
2026-01-31 17:33:06.421 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-01-31 17:33:06.554 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 17:33:06.572 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 17:33:06.580 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":2023,"noteId":1862482047415615599,"userId":100,"contentUuid":"10474b66-6c3e-4190-b176-5d7f0b44f07a","content":"这是一条测试2级评论222","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 17:33:06","updateTime":"2026-01-31 17:33:06"}]
2026-01-31 17:33:06.588 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 17:33:06.682 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 2023(Long), 1862482047415615599(Long), 100(Long), 10474b66-6c3e-4190-b176-5d7f0b44f07a(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T17:33:06(LocalDateTime), 2026-01-31T17:33:06(LocalDateTime)
2026-01-31 17:33:06.688 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 17:33:06.710 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 17:33:06.715 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:33:06.716 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-01-31 17:33:06.754 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001BE8863947C6B9E42EF3D0001, offsetMsgId=7F00000100002A9F0000000000005AA9, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=2], queueOffset=8]
2026-01-31 17:33:06.882 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Receive server push request, request = NotifySubscriberRequest, requestId = 54
2026-01-31 17:33:06.882 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Ack server push request, request = NotifySubscriberRequest, requestId = 54
2026-01-31 17:33:07.302 [nacos-grpc-client-executor-127.0.0.1-21] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Receive server push request, request = NotifySubscriberRequest, requestId = 55
2026-01-31 17:33:07.303 [nacos-grpc-client-executor-127.0.0.1-21] INFO  com.alibaba.nacos.common.remote.client - [9b310f54-074f-4d1a-8db1-9fec167064c7] Ack server push request, request = NotifySubscriberRequest, requestId = 55
2026-01-31 17:33:07.767 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, size: 1
2026-01-31 17:33:07.768 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, ["[{\"noteId\":1862482047415615599,\"commentId\":2023,\"level\":2,\"parentId\":2001}]"]
2026-01-31 17:33:07.984 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-01-31 17:33:07.984 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 17:33:07.985 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 17:33:09.318 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-01-31 17:33:09.319 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-01-31 17:33:09.322 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-01-31 17:33:09.322 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-01-31 17:33:09.323 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 17:33:09.326 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 17:33:09.328 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-01-31 17:33:09.330 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 2.4(Double), 2001(Long)
2026-01-31 17:33:09.338 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-01-31 17:43:55.597 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 17:43:55.598 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 17:43:55.598 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 17:43:55.599 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 17:43:55.608 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:43:55.609 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:43:55.620 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:43:55.620 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:43:55.655 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 17:43:55.655 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 17:43:55.658 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 17:43:55.658 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 17:43:55.658 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 17:43:55.658 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 17:43:55.658 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1f407a75[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 17:43:55.659 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769902354183_127.0.0.1_7067
2026-01-31 17:43:55.660 [nacos-grpc-client-executor-127.0.0.1-157] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769902354183_127.0.0.1_7067]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 17:43:55.666 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@6d766df7[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 158]
2026-01-31 17:43:55.666 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@765d8cd1[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 226]
2026-01-31 17:43:55.666 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 17:43:55.666 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 17:43:55.666 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 17:43:55.673 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:43:55.673 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:43:55.673 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:43:55.675 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 17:43:55.809 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 17:43:55.809 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 17:43:55.811 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 17:43:55.827 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 19:38:33.206 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 19:38:33.311 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 19:38:34.162 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 19:38:34.190 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 19:38:34.193 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 19:38:34.227 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 19:38:35.951 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 19:38:35.966 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 19:38:36.051 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 0 Redis repository interfaces.
2026-01-31 19:38:36.708 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-01-31 19:38:36.892 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:36.896 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:36.900 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:37.924 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.073 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.078 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.087 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.088 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$713/0x000002a7014fd7f8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.093 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.106 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.108 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 19:38:38.866 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 19:38:38.895 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 19:38:38.896 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 19:38:39.187 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 19:38:39.187 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4955 ms
2026-01-31 19:38:39.447 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 19:38:40.090 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 19:38:40.691 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 19:38:40.834 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 19:38:42.127 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 19:38:42.127 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 19:38:42.227 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 19:38:42.228 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 19:38:42.359 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 19:38:42.402 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 19:38:44.101 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 19:38:44.113 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 19:38:44.113 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 19:38:44.114 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 19:38:44.114 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 19:38:44.165 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 19:38:44.165 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 19:38:44.166 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 19:38:44.174 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 19:38:44.174 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 19:38:44.179 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 19:38:44.199 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 5a94c6b3-3e59-4387-ad64-8c3afe81537b
2026-01-31 19:38:44.260 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 19:38:44.261 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 19:38:44.261 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 19:38:44.265 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 19:38:44.330 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 19:38:45.827 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769909925549_127.0.0.1_20389
2026-01-31 19:38:45.828 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Notify connected event to listeners.
2026-01-31 19:38:45.828 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 19:38:45.828 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 19:38:45.828 [main] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1277/0x000002a7019bba90
2026-01-31 19:38:45.831 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 19:38:45.867 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 19:38:46.073 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 14.125 seconds (process running for 15.707)
2026-01-31 19:40:05.148 [http-nio-8093-exec-3] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 19:40:05.148 [http-nio-8093-exec-3] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 19:40:05.149 [http-nio-8093-exec-3] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 19:40:05.241 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [二级评论分页查询], 入参: {"parentCommentId":2001,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findChildCommentPageList =======
2026-01-31 19:40:05.267 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==>  Preparing: select child_comment_total from t_comment where id = ? and level = 1
2026-01-31 19:40:05.446 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==> Parameters: 2001(Long)
2026-01-31 19:40:05.511 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - <==      Total: 1
2026-01-31 19:40:05.517 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==>  Preparing: select id, user_id, note_id, content_uuid, is_content_empty, image_url, like_total, create_time, reply_user_id, parent_id, reply_comment_id from t_comment where parent_id = ? and level = 2 order by id asc limit ?, ?
2026-01-31 19:40:05.521 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==> Parameters: 2001(Long), 1(Long), 6(Long)
2026-01-31 19:40:05.542 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - <==      Total: 6
2026-01-31 19:40:05.639 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 19:40:05.658 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 19:40:05.666 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 19:40:06.027 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-user, group:DEFAULT_GROUP, clusters: 
2026-01-31 19:40:06.033 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 19:40:06.033 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 19:40:06.226 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [二级评论分页查询], 耗时: 986ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2016,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2017,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2018,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2019,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2020,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论HEAT!","imageUrl":"","createTime":"5小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2021,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论EARLY","imageUrl":"","createTime":"4小时前","likeTotal":0,"replyUserName":null,"replyUserId":null}],"pageNo":1,"totalCount":8,"pageSize":6,"totalPage":2}======
2026-01-31 19:40:06.259 [nacos-grpc-client-executor-127.0.0.1-38] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Receive server push request, request = NotifySubscriberRequest, requestId = 57
2026-01-31 19:40:06.259 [nacos-grpc-client-executor-127.0.0.1-38] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Ack server push request, request = NotifySubscriberRequest, requestId = 57
2026-01-31 19:40:06.573 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Receive server push request, request = NotifySubscriberRequest, requestId = 58
2026-01-31 19:40:06.573 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [5a94c6b3-3e59-4387-ad64-8c3afe81537b] Ack server push request, request = NotifySubscriberRequest, requestId = 58
2026-01-31 19:40:27.370 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [二级评论分页查询], 入参: {"parentCommentId":2001,"pageNo":2}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findChildCommentPageList =======
2026-01-31 19:40:27.371 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==>  Preparing: select child_comment_total from t_comment where id = ? and level = 1
2026-01-31 19:40:27.371 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==> Parameters: 2001(Long)
2026-01-31 19:40:27.373 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - <==      Total: 1
2026-01-31 19:40:27.373 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==>  Preparing: select id, user_id, note_id, content_uuid, is_content_empty, image_url, like_total, create_time, reply_user_id, parent_id, reply_comment_id from t_comment where parent_id = ? and level = 2 order by id asc limit ?, ?
2026-01-31 19:40:27.374 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==> Parameters: 2001(Long), 7(Long), 6(Long)
2026-01-31 19:40:27.376 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - <==      Total: 1
2026-01-31 19:40:27.406 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [二级评论分页查询], 耗时: 35ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2023,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试2级评论222","imageUrl":"","createTime":"2小时前","likeTotal":0,"replyUserName":null,"replyUserId":null}],"pageNo":2,"totalCount":8,"pageSize":6,"totalPage":2}======
2026-01-31 19:40:34.899 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [二级评论分页查询], 入参: {"parentCommentId":2001,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findChildCommentPageList =======
2026-01-31 19:40:34.899 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==>  Preparing: select child_comment_total from t_comment where id = ? and level = 1
2026-01-31 19:40:34.900 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==> Parameters: 2001(Long)
2026-01-31 19:40:34.901 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - <==      Total: 1
2026-01-31 19:40:34.901 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==>  Preparing: select id, user_id, note_id, content_uuid, is_content_empty, image_url, like_total, create_time, reply_user_id, parent_id, reply_comment_id from t_comment where parent_id = ? and level = 2 order by id asc limit ?, ?
2026-01-31 19:40:34.902 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==> Parameters: 2001(Long), 1(Long), 6(Long)
2026-01-31 19:40:34.905 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - <==      Total: 6
2026-01-31 19:40:34.941 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [二级评论分页查询], 耗时: 41ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2016,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2017,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2018,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2019,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"6小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2020,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论HEAT!","imageUrl":"","createTime":"5小时前","likeTotal":0,"replyUserName":null,"replyUserId":null},{"commentId":2021,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论EARLY","imageUrl":"","createTime":"4小时前","likeTotal":0,"replyUserName":null,"replyUserId":null}],"pageNo":1,"totalCount":8,"pageSize":6,"totalPage":2}======
2026-01-31 20:03:42.054 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 20:03:42.054 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 20:03:42.054 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 20:03:42.055 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 20:03:42.386 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 20:03:42.386 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 20:03:42.404 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 20:03:42.407 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 20:03:42.448 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 20:03:42.448 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 20:03:42.455 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 20:03:42.456 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@5a36f4c2[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 20:03:42.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769909925549_127.0.0.1_20389
2026-01-31 20:03:42.458 [nacos-grpc-client-executor-127.0.0.1-338] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769909925549_127.0.0.1_20389]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 20:03:42.463 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3f358ddf[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 339]
2026-01-31 20:03:42.463 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@65a4dd66[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 498]
2026-01-31 20:03:42.463 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 20:03:42.464 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 20:03:42.464 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 20:03:42.475 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 20:03:42.475 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 20:03:42.475 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 20:03:42.475 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 20:03:42.507 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 20:03:42.507 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 20:03:42.510 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 20:03:42.511 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 23:36:05.246 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:05.306 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:05.688 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:05.701 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:05.701 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 23:36:05.715 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 23:36:06.242 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 23:36:06.244 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 23:36:06.265 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2026-01-31 23:36:06.473 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-01-31 23:36:06.513 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.516 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.517 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.736 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.787 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.790 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.792 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.792 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x00000145815450a0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.794 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.799 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:06.800 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:07.057 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 23:36:07.069 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 23:36:07.070 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 23:36:07.175 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 23:36:07.175 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1458 ms
2026-01-31 23:36:07.264 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 23:36:07.543 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 23:36:07.848 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 23:36:07.919 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 23:36:08.189 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 23:36:08.403 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 23:36:08.403 [main] ERROR o.a.r.s.a.ListenerContainerConfiguration - Started container failed. DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
java.lang.IllegalStateException: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.updateTopicRouteInfoFromNameServer(MQClientInstance.java:680)
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.updateTopicRouteInfoFromNameServer(MQClientInstance.java:510)
	at org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.updateTopicSubscribeInfoWhenSubscriptionChanged(DefaultMQPushConsumerImpl.java:872)
	at org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.start(DefaultMQPushConsumerImpl.java:655)
	at org.apache.rocketmq.client.consumer.DefaultMQPushConsumer.start(DefaultMQPushConsumer.java:707)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.start(DefaultRocketMQListenerContainer.java:343)
	at org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration.registerContainer(ListenerContainerConfiguration.java:106)
	at org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor.postProcessAfterInitialization(RocketMQMessageListenerBeanPostProcessor.java:55)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:435)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.evan.greennote.comment.biz.GreenNoteCommentBizApplication.main(GreenNoteCommentBizApplication.java:16)
Caused by: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
	at org.apache.rocketmq.remoting.netty.NettyRemotingClient.getAndCreateNameserverChannel(NettyRemotingClient.java:458)
	at org.apache.rocketmq.remoting.netty.NettyRemotingClient.getAndCreateChannel(NettyRemotingClient.java:413)
	at org.apache.rocketmq.remoting.netty.NettyRemotingClient.invokeSync(NettyRemotingClient.java:382)
	at org.apache.rocketmq.client.impl.MQClientAPIImpl.getTopicRouteInfoFromNameServer(MQClientAPIImpl.java:1394)
	at org.apache.rocketmq.client.impl.MQClientAPIImpl.getTopicRouteInfoFromNameServer(MQClientAPIImpl.java:1384)
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.updateTopicRouteInfoFromNameServer(MQClientInstance.java:623)
	... 25 common frames omitted
2026-01-31 23:36:08.404 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentHeatUpdateConsumer' defined in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\com\evan\greennote\comment\biz\consumer\CommentHeatUpdateConsumer.class]: java.lang.IllegalStateException: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
2026-01-31 23:36:08.406 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 23:36:08.418 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 23:36:08.422 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-01-31 23:36:08.423 [main] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2026-01-31 23:36:08.439 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-31 23:36:08.454 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentHeatUpdateConsumer' defined in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\com\evan\greennote\comment\biz\consumer\CommentHeatUpdateConsumer.class]: java.lang.IllegalStateException: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.evan.greennote.comment.biz.GreenNoteCommentBizApplication.main(GreenNoteCommentBizApplication.java:16)
Caused by: java.lang.RuntimeException: java.lang.IllegalStateException: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
	at org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration.registerContainer(ListenerContainerConfiguration.java:109)
	at org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor.postProcessAfterInitialization(RocketMQMessageListenerBeanPostProcessor.java:55)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:435)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	... 15 common frames omitted
Caused by: java.lang.IllegalStateException: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.updateTopicRouteInfoFromNameServer(MQClientInstance.java:680)
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.updateTopicRouteInfoFromNameServer(MQClientInstance.java:510)
	at org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.updateTopicSubscribeInfoWhenSubscriptionChanged(DefaultMQPushConsumerImpl.java:872)
	at org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.start(DefaultMQPushConsumerImpl.java:655)
	at org.apache.rocketmq.client.consumer.DefaultMQPushConsumer.start(DefaultMQPushConsumer.java:707)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.start(DefaultRocketMQListenerContainer.java:343)
	at org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration.registerContainer(ListenerContainerConfiguration.java:106)
	... 19 common frames omitted
Caused by: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to [127.0.0.1:9876] failed
	at org.apache.rocketmq.remoting.netty.NettyRemotingClient.getAndCreateNameserverChannel(NettyRemotingClient.java:458)
	at org.apache.rocketmq.remoting.netty.NettyRemotingClient.getAndCreateChannel(NettyRemotingClient.java:413)
	at org.apache.rocketmq.remoting.netty.NettyRemotingClient.invokeSync(NettyRemotingClient.java:382)
	at org.apache.rocketmq.client.impl.MQClientAPIImpl.getTopicRouteInfoFromNameServer(MQClientAPIImpl.java:1394)
	at org.apache.rocketmq.client.impl.MQClientAPIImpl.getTopicRouteInfoFromNameServer(MQClientAPIImpl.java:1384)
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.updateTopicRouteInfoFromNameServer(MQClientInstance.java:623)
	... 25 common frames omitted
2026-01-31 23:36:31.820 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:31.910 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:32.507 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:32.528 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:32.529 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-01-31 23:36:32.550 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-01-31 23:36:33.771 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-31 23:36:33.778 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-31 23:36:33.845 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2026-01-31 23:36:34.391 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-01-31 23:36:34.507 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:34.511 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:34.513 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.169 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.285 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.289 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.298 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.299 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x00000256535240c0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.303 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.315 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.316 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-01-31 23:36:35.820 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-01-31 23:36:35.840 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-31 23:36:35.842 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-01-31 23:36:36.022 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-31 23:36:36.023 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3468 ms
2026-01-31 23:36:36.158 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-01-31 23:36:36.556 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-01-31 23:36:37.093 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 23:36:37.218 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-01-31 23:36:38.142 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 23:36:38.142 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-01-31 23:36:38.259 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 23:36:38.260 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-01-31 23:36:38.366 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 23:36:38.389 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-01-31 23:36:39.815 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-01-31 23:36:39.824 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-01-31 23:36:39.824 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-01-31 23:36:39.825 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-01-31 23:36:39.825 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-01-31 23:36:39.861 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-01-31 23:36:39.861 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-01-31 23:36:39.862 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-01-31 23:36:39.868 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-01-31 23:36:39.869 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-01-31 23:36:39.874 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-01-31 23:36:39.889 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 05e47c7d-f462-4d0d-9ed7-aae5b442ddcb
2026-01-31 23:36:39.912 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-01-31 23:36:39.913 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-01-31 23:36:39.913 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-01-31 23:36:39.915 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-01-31 23:36:39.953 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-01-31 23:36:41.221 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769924200988_127.0.0.1_12200
2026-01-31 23:36:41.221 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Notify connected event to listeners.
2026-01-31 23:36:41.222 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-01-31 23:36:41.222 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-01-31 23:36:41.222 [main] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1290/0x00000256539b2110
2026-01-31 23:36:41.223 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-01-31 23:36:41.241 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.141.50.251:8093 register finished
2026-01-31 23:36:41.418 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 10.632 seconds (process running for 11.959)
2026-01-31 23:37:28.801 [http-nio-8093-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-31 23:37:28.801 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-31 23:37:28.802 [http-nio-8093-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-31 23:37:28.902 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-01-31 23:37:29.172 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==>  Preparing: select comment_total from t_note_count where note_id = ?
2026-01-31 23:37:29.352 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==> Parameters: 1862482047415615529(Long)
2026-01-31 23:37:29.395 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - <==      Total: 1
2026-01-31 23:37:29.406 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - ==>  Preparing: select id, heat from t_comment where note_id = ? and level = 1 order by heat desc limit 500
2026-01-31 23:37:29.407 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, heat from t_comment where note_id = ? and level = 1 order by heat desc limit ?, ?
2026-01-31 23:37:29.412 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==> Parameters: 1862482047415615529(Long), 0(Long), 10(Long)
2026-01-31 23:37:29.412 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - ==> Parameters: 1862482047415615529(Long)
2026-01-31 23:37:29.435 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - <==      Total: 1
2026-01-31 23:37:29.438 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - <==      Total: 1
2026-01-31 23:37:29.459 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, create_time, heat from t_comment where id in ( ? )
2026-01-31 23:37:29.460 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==> Parameters: 2015(Long)
2026-01-31 23:37:29.461 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - <==      Total: 1
2026-01-31 23:37:29.541 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-01-31 23:37:29.594 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 23:37:29.601 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.141.50.251","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 23:37:29.973 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-user, group:DEFAULT_GROUP, clusters: 
2026-01-31 23:37:29.978 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 23:37:29.979 [http-nio-8093-exec-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.141.50.251","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 23:37:30.135 [nacos-grpc-client-executor-127.0.0.1-27] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Receive server push request, request = NotifySubscriberRequest, requestId = 59
2026-01-31 23:37:30.135 [nacos-grpc-client-executor-127.0.0.1-27] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Ack server push request, request = NotifySubscriberRequest, requestId = 59
2026-01-31 23:37:30.166 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 1263ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"10小时前","likeTotal":0,"childCommentTotal":8,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"10小时前","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null,"heat":0.0},"heat":2.4}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-01-31 23:37:30.540 [nacos-grpc-client-executor-127.0.0.1-28] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Receive server push request, request = NotifySubscriberRequest, requestId = 60
2026-01-31 23:37:30.540 [nacos-grpc-client-executor-127.0.0.1-28] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Ack server push request, request = NotifySubscriberRequest, requestId = 60
2026-01-31 23:38:01.500 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-01-31 23:38:01.511 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615500,"content":"这是一条测试2级评论222","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-01-31 23:38:01.512 [http-nio-8093-exec-3] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-01-31 23:38:01.531 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-01-31 23:38:01.539 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 23:38:01.539 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.141.50.251","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-01-31 23:38:01.724 [http-nio-8093-exec-3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615500,"content":"这是一条测试2级评论222","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 23:38:01","creatorId":100,"commentId":4001}
2026-01-31 23:38:01.736 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 225ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-01-31 23:38:01.738 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-01-31 23:38:01.776 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001196463947C6B9F9106990000, offsetMsgId=7F00000100002A9F0000000000005D89, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=1], queueOffset=6]
2026-01-31 23:38:01.795 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-01-31 23:38:01.797 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615500,"content":"这是一条测试2级评论222","imageUrl":null,"replyCommentId":2001,"createTime":"2026-01-31 23:38:01","creatorId":100,"commentId":4001}
2026-01-31 23:38:01.801 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-01-31 23:38:01.802 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 23:38:01.804 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 23:38:01.809 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":4001,"noteId":1862482047415615500,"userId":100,"contentUuid":"16640855-5dae-482d-a0dd-745240f04665","content":"这是一条测试2级评论222","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 23:38:01","updateTime":"2026-01-31 23:38:01"}]
2026-01-31 23:38:01.818 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-01-31 23:38:01.947 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 4001(Long), 1862482047415615500(Long), 100(Long), 16640855-5dae-482d-a0dd-745240f04665(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-01-31T23:38:01(LocalDateTime), 2026-01-31T23:38:01(LocalDateTime)
2026-01-31 23:38:01.957 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-01-31 23:38:02.032 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001196463947C6B9F9107AC0001, offsetMsgId=7F00000100002A9F0000000000005F82, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=6]
2026-01-31 23:38:02.131 [nacos-grpc-client-executor-127.0.0.1-36] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Receive server push request, request = NotifySubscriberRequest, requestId = 62
2026-01-31 23:38:02.131 [nacos-grpc-client-executor-127.0.0.1-36] INFO  com.alibaba.nacos.common.remote.client - [05e47c7d-f462-4d0d-9ed7-aae5b442ddcb] Ack server push request, request = NotifySubscriberRequest, requestId = 62
2026-01-31 23:38:03.058 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, size: 1
2026-01-31 23:38:03.058 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, ["[{\"noteId\":1862482047415615500,\"commentId\":4001,\"level\":2,\"parentId\":2001}]"]
2026-01-31 23:38:03.066 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-01-31 23:38:03.067 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 23:38:03.069 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 23:38:05.395 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-01-31 23:38:05.396 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-01-31 23:38:05.404 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-01-31 23:38:05.405 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-01-31 23:38:05.406 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-01-31 23:38:05.408 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-01-31 23:38:05.411 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-01-31 23:38:05.412 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 2.7(Double), 2001(Long)
2026-01-31 23:38:05.420 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-01-31 23:38:11.065 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-01-31 23:38:11.087 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.C.selectCommentCountByIds - ==>  Preparing: select id, child_comment_total, like_total, level from t_comment where id in ( ? , ? )
2026-01-31 23:38:11.088 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.C.selectCommentCountByIds - ==> Parameters: 2001(Long), 2015(Long)
2026-01-31 23:38:11.090 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.C.selectCommentCountByIds - <==      Total: 2
2026-01-31 23:38:11.091 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 25ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"10小时前","likeTotal":0,"childCommentTotal":9,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"10小时前","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null,"heat":0.0},"heat":2.4}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-01-31 23:38:34.056 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-01-31 23:38:34.057 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-01-31 23:38:34.057 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-01-31 23:38:34.058 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-01-31 23:38:34.077 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 23:38:34.078 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 23:38:34.100 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 23:38:34.100 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 23:38:34.151 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-01-31 23:38:34.151 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.141.50.251', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-01-31 23:38:34.153 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@5c555bdf[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-01-31 23:38:34.154 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769924200988_127.0.0.1_12200
2026-01-31 23:38:34.155 [nacos-grpc-client-executor-127.0.0.1-43] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769924200988_127.0.0.1_12200]Ignore complete event,isRunning:false,isAbandon=false
2026-01-31 23:38:34.158 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5380a184[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 44]
2026-01-31 23:38:34.158 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@81c3942[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 37]
2026-01-31 23:38:34.158 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-01-31 23:38:34.158 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-01-31 23:38:34.158 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-01-31 23:38:34.165 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 23:38:34.165 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 23:38:34.165 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 23:38:34.166 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-01-31 23:38:34.347 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-01-31 23:38:34.347 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-01-31 23:38:34.353 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-01-31 23:38:34.364 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
