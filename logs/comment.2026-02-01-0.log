2026-02-01 12:53:34.524 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 12:53:34.598 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 12:53:35.215 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 12:53:35.234 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 12:53:35.236 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 12:53:35.284 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 12:53:36.633 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 12:53:36.638 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 12:53:36.682 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2026-02-01 12:53:37.082 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-02-01 12:53:37.146 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.148 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.151 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.602 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.691 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.695 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.705 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.706 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x0000022709543e78] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.709 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.723 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:37.724 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 12:53:38.100 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 12:53:38.119 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 12:53:38.119 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 12:53:38.299 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 12:53:38.299 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3011 ms
2026-02-01 12:53:38.470 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 12:53:39.040 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 12:53:40.177 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 12:53:40.319 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 12:53:41.349 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 12:53:41.350 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 12:53:41.447 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 12:53:41.447 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 12:53:41.582 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 12:53:41.617 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 12:53:43.088 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 12:53:43.100 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 12:53:43.100 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 12:53:43.101 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 12:53:43.101 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 12:53:43.150 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 12:53:43.150 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 12:53:43.153 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 12:53:43.164 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 12:53:43.165 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 12:53:43.170 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 12:53:43.188 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 04349696-539e-4cf3-af41-6411169f400c
2026-02-01 12:53:43.221 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 12:53:43.221 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 12:53:43.222 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 12:53:43.225 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 12:53:43.272 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 12:53:44.569 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769972024328_127.0.0.1_59141
2026-02-01 12:53:44.569 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Notify connected event to listeners.
2026-02-01 12:53:44.569 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 12:53:44.569 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 12:53:44.570 [main] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1290/0x00000227099b0cc0
2026-02-01 12:53:44.573 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 12:53:44.626 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 12:53:44.808 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 11.138 seconds (process running for 11.748)
2026-02-01 12:54:27.401 [http-nio-8093-exec-3] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 12:54:27.402 [http-nio-8093-exec-3] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 12:54:27.403 [http-nio-8093-exec-3] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-01 12:54:27.527 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [二级评论分页查询], 入参: {"parentCommentId":2001,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findChildCommentPageList =======
2026-02-01 12:54:27.863 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==>  Preparing: select child_comment_total from t_comment where id = ? and level = 1
2026-02-01 12:54:28.087 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - ==> Parameters: 2001(Long)
2026-02-01 12:54:28.133 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectChildCommentTotalById - <==      Total: 1
2026-02-01 12:54:28.151 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.C.selectChildCommentsByParentIdAndLimit - ==>  Preparing: select id, create_time from t_comment where parent_id = ? and level = 2 order by create_time asc limit ?
2026-02-01 12:54:28.151 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==>  Preparing: select id, user_id, note_id, content_uuid, is_content_empty, image_url, like_total, create_time, reply_user_id, parent_id, reply_comment_id from t_comment where parent_id = ? and level = 2 order by id asc limit ?, ?
2026-02-01 12:54:28.156 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - ==> Parameters: 2001(Long), 1(Long), 6(Long)
2026-02-01 12:54:28.156 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.C.selectChildCommentsByParentIdAndLimit - ==> Parameters: 2001(Long), 60(Integer)
2026-02-01 12:54:28.178 [NoteExecutor-2] DEBUG c.e.g.c.b.d.m.C.selectChildCommentsByParentIdAndLimit - <==      Total: 9
2026-02-01 12:54:28.179 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectChildPageList - <==      Total: 6
2026-02-01 12:54:28.307 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-02-01 12:54:28.334 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-02-01 12:54:28.345 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-02-01 12:54:28.800 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-user, group:DEFAULT_GROUP, clusters: 
2026-02-01 12:54:28.807 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.140.64.238","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-02-01 12:54:28.807 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.140.64.238","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2026-02-01 12:54:28.894 [nacos-grpc-client-executor-127.0.0.1-28] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Receive server push request, request = NotifySubscriberRequest, requestId = 63
2026-02-01 12:54:28.895 [nacos-grpc-client-executor-127.0.0.1-28] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Ack server push request, request = NotifySubscriberRequest, requestId = 63
2026-02-01 12:54:29.050 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [二级评论分页查询], 耗时: 1522ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2016,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2017,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2018,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2019,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2020,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论HEAT!","imageUrl":"","createTime":"22小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2021,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论EARLY","imageUrl":"","createTime":"21小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0}],"pageNo":1,"totalCount":9,"pageSize":6,"totalPage":2}======
2026-02-01 12:54:29.312 [nacos-grpc-client-executor-127.0.0.1-29] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Receive server push request, request = NotifySubscriberRequest, requestId = 64
2026-02-01 12:54:29.312 [nacos-grpc-client-executor-127.0.0.1-29] INFO  com.alibaba.nacos.common.remote.client - [04349696-539e-4cf3-af41-6411169f400c] Ack server push request, request = NotifySubscriberRequest, requestId = 64
2026-02-01 13:26:33.933 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 13:26:33.933 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 13:26:33.934 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 13:26:33.934 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 13:26:33.955 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:26:33.955 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:26:33.960 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:26:33.961 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:26:33.998 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 13:26:33.998 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 13:26:34.003 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 13:26:34.004 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4cbb3fa8[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 13:26:34.005 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769972024328_127.0.0.1_59141
2026-02-01 13:26:34.005 [nacos-grpc-client-executor-127.0.0.1-436] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769972024328_127.0.0.1_59141]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 13:26:34.012 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5a12070e[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 437]
2026-02-01 13:26:34.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@452b60d4[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 656]
2026-02-01 13:26:34.012 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 13:26:34.012 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 13:26:34.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 13:26:34.019 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:26:34.019 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:26:34.019 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:26:34.020 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:26:34.158 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:26:34.159 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:26:34.162 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 13:26:34.164 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 13:26:47.927 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:26:47.993 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:26:48.409 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:26:48.422 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:26:48.423 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 13:26:48.440 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 13:26:49.087 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 13:26:49.090 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 13:26:49.118 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2026-02-01 13:26:49.345 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-02-01 13:26:49.386 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.388 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.389 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.636 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.696 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.699 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.704 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.704 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x00000244d8522848] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.707 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.712 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.713 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:26:49.996 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 13:26:50.012 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 13:26:50.012 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 13:26:50.125 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 13:26:50.125 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1681 ms
2026-02-01 13:26:50.216 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 13:26:50.514 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 13:26:50.818 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 13:26:50.889 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 13:26:51.431 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:26:51.431 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 13:26:51.477 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:26:51.477 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 13:26:51.529 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 13:26:51.546 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 13:26:52.315 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 13:26:52.327 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:26:52.327 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 13:26:52.328 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 13:26:52.328 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 13:26:52.354 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 13:26:52.355 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 13:26:52.356 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 13:26:52.361 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 13:26:52.361 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 13:26:52.365 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 13:26:52.376 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 01f9e131-19f4-4731-a9f2-1abba858eb0d
2026-02-01 13:26:52.399 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 13:26:52.399 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 13:26:52.399 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 13:26:52.402 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 13:26:52.433 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 13:26:53.387 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769974013184_127.0.0.1_32457
2026-02-01 13:26:53.389 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Notify connected event to listeners.
2026-02-01 13:26:53.389 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 13:26:53.389 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 13:26:53.389 [main] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1290/0x00000244d89ad180
2026-02-01 13:26:53.391 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 13:26:53.405 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 13:26:53.494 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 6.213 seconds (process running for 7.138)
2026-02-01 13:29:22.781 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 13:29:22.781 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 13:29:22.783 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-01 13:29:22.791 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:29:22.814 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:29:30.038 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [二级评论分页查询], 入参: {"parentCommentId":2001,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findChildCommentPageList =======
2026-02-01 13:29:30.437 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectCommentCountByIds - ==>  Preparing: select id, child_comment_total, like_total, level from t_comment where id in ( ? , ? , ? , ? , ? , ? )
2026-02-01 13:29:30.647 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectCommentCountByIds - ==> Parameters: 2016(Long), 2017(Long), 2018(Long), 2019(Long), 2020(Long), 2021(Long)
2026-02-01 13:29:30.681 [http-nio-8093-exec-3] DEBUG c.e.g.c.b.d.m.C.selectCommentCountByIds - <==      Total: 6
2026-02-01 13:29:30.688 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [二级评论分页查询], 耗时: 648ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2016,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2017,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2018,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2019,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2020,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论HEAT!","imageUrl":"","createTime":"22小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2021,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论EARLY","imageUrl":"","createTime":"21小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0}],"pageNo":1,"totalCount":9,"pageSize":6,"totalPage":2}======
2026-02-01 13:29:58.648 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:29:58.652 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:30:14.747 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 13:30:14.750 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 13:30:14.753 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 13:30:14.757 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 13:30:14.786 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 40ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 13:30:14.852 [NettyClientPublicExecutor_1] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001FD5863947C6B02E5CD910000, offsetMsgId=7F00000100002A9F0000000000006262, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2026-02-01 13:31:41.264 [http-nio-8093-exec-8] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:31:41.267 [http-nio-8093-exec-8] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:31:47.625 [http-nio-8093-exec-10] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 13:31:47.627 [http-nio-8093-exec-10] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 13:31:47.628 [http-nio-8093-exec-10] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 13:31:47.630 [http-nio-8093-exec-10] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 13:31:47.634 [http-nio-8093-exec-10] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 8ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 13:31:47.639 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001FD5863947C6B02E738320001, offsetMsgId=7F00000100002A9F0000000000006400, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=1]
2026-02-01 13:31:48.812 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 13:31:48.813 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 13:31:48.814 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 13:31:48.815 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 13:31:48.819 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 7ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 13:31:48.824 [NettyClientPublicExecutor_3] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001FD5863947C6B02E73CD40002, offsetMsgId=7F00000100002A9F000000000000659E, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=2]
2026-02-01 13:33:25.839 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:33:25.840 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 13:33:25.842 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 13:33:25.843 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 13:33:25.844 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 13:33:25.847 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 7ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 13:33:25.848 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:33:25.852 [NettyClientPublicExecutor_4] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001FD5863947C6B02E8B7D80003, offsetMsgId=7F00000100002A9F000000000000673C, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=3]
2026-02-01 13:33:35.645 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:33:35.646 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [二级评论分页查询], 入参: {"parentCommentId":2001,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findChildCommentPageList =======
2026-02-01 13:33:35.660 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [二级评论分页查询], 耗时: 13ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2016,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2017,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2018,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2019,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"23小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2020,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论HEAT!","imageUrl":"","createTime":"22小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0},{"commentId":2021,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论EARLY","imageUrl":"","createTime":"21小时前","likeTotal":0,"replyUserName":null,"replyUserId":null,"heat":0.0}],"pageNo":1,"totalCount":9,"pageSize":6,"totalPage":2}======
2026-02-01 13:33:35.661 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:33:45.810 [http-nio-8093-exec-6] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:33:45.814 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论分页查询], 入参: {"noteId":1862482047415615529,"pageNo":1}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: findCommentPageList =======
2026-02-01 13:33:45.817 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==>  Preparing: select comment_total from t_note_count where note_id = ?
2026-02-01 13:33:45.817 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - ==> Parameters: 1862482047415615529(Long)
2026-02-01 13:33:45.824 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.N.selectCommentTotalByNoteId - <==      Total: 1
2026-02-01 13:33:45.828 [NoteExecutor-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - ==>  Preparing: select id, heat from t_comment where note_id = ? and level = 1 order by heat desc limit 500
2026-02-01 13:33:45.828 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, heat from t_comment where note_id = ? and level = 1 order by heat desc limit ?, ?
2026-02-01 13:33:45.832 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - ==> Parameters: 1862482047415615529(Long), 0(Long), 10(Long)
2026-02-01 13:33:45.832 [NoteExecutor-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - ==> Parameters: 1862482047415615529(Long)
2026-02-01 13:33:45.835 [NoteExecutor-3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectHeatComments - <==      Total: 1
2026-02-01 13:33:45.842 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.selectPageList - <==      Total: 1
2026-02-01 13:33:45.843 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, create_time, heat from t_comment where id in ( ? )
2026-02-01 13:33:45.843 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - ==> Parameters: 2015(Long)
2026-02-01 13:33:45.846 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectTwoLevelCommentByIds - <==      Total: 1
2026-02-01 13:33:45.856 [http-nio-8093-exec-6] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 3
2026-02-01 13:33:45.917 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-02-01 13:33:45.927 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 13:33:45.935 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 13:33:46.059 [http-nio-8093-exec-6] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 3
2026-02-01 13:33:46.072 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-user, group:DEFAULT_GROUP, clusters: 
2026-02-01 13:33:46.076 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.140.64.238","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 13:33:46.076 [http-nio-8093-exec-6] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-user -> [{"ip":"10.140.64.238","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 13:33:46.105 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论分页查询], 耗时: 289ms, 出参: {"success":true,"message":null,"errorCode":null,"data":[{"commentId":2001,"userId":100,"avatar":null,"nickname":"小绿书12100","content":"这是一条测试二级评论","imageUrl":"","createTime":"昨天 13:02","likeTotal":0,"childCommentTotal":9,"firstReplyComment":{"commentId":2015,"userId":100,"avatar":null,"nickname":"小绿书12100","content":null,"imageUrl":"","createTime":"昨天 13:31","likeTotal":0,"childCommentTotal":null,"firstReplyComment":null,"heat":0.0},"heat":2.7}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1}======
2026-02-01 13:33:46.106 [http-nio-8093-exec-6] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:33:46.519 [nacos-grpc-client-executor-127.0.0.1-100] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Receive server push request, request = NotifySubscriberRequest, requestId = 66
2026-02-01 13:33:46.520 [nacos-grpc-client-executor-127.0.0.1-100] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Ack server push request, request = NotifySubscriberRequest, requestId = 66
2026-02-01 13:33:46.614 [nacos-grpc-client-executor-127.0.0.1-101] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Receive server push request, request = NotifySubscriberRequest, requestId = 67
2026-02-01 13:33:46.616 [nacos-grpc-client-executor-127.0.0.1-101] INFO  com.alibaba.nacos.common.remote.client - [01f9e131-19f4-4731-a9f2-1abba858eb0d] Ack server push request, request = NotifySubscriberRequest, requestId = 67
2026-02-01 13:54:29.137 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 13:54:29.137 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 13:54:29.137 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 13:54:29.137 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 13:54:29.147 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:54:29.147 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:54:29.151 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:54:29.151 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:54:29.176 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 13:54:29.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 13:54:29.178 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 13:54:29.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1ec7193f[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 13:54:29.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769974013184_127.0.0.1_32457
2026-02-01 13:54:29.179 [nacos-grpc-client-executor-127.0.0.1-352] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769974013184_127.0.0.1_32457]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 13:54:29.181 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@54a604f1[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 353]
2026-02-01 13:54:29.182 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@395150a5[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 552]
2026-02-01 13:54:29.182 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 13:54:29.182 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 13:54:29.182 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 13:54:29.187 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:54:29.188 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:54:29.188 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:54:29.188 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:54:29.306 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 13:54:29.306 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 13:54:29.308 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 13:54:29.309 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 13:54:34.686 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:54:34.750 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:54:35.118 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:54:35.130 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:54:35.131 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 13:54:35.146 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 13:54:35.695 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 13:54:35.699 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 13:54:35.721 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2026-02-01 13:54:35.980 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2acebf0f-ee29-31ff-b49f-f2a5c662c4db
2026-02-01 13:54:36.017 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.018 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.019 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.243 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.293 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.295 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.298 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.299 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000001bf815450a0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.301 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.305 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.305 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 13:54:36.525 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 13:54:36.534 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 13:54:36.534 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 13:54:36.628 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 13:54:36.628 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1479 ms
2026-02-01 13:54:36.705 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 13:54:36.961 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 13:54:37.208 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 13:54:37.273 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 13:54:37.744 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:54:37.745 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 13:54:37.785 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 13:54:37.785 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 13:54:37.838 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 13:54:37.860 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 13:54:38.630 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 13:54:38.636 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 13:54:38.636 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 13:54:38.637 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 13:54:38.637 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 13:54:38.657 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 13:54:38.657 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 13:54:38.659 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 13:54:38.663 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 13:54:38.663 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 13:54:38.666 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 13:54:38.673 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 4eaf2f54-ad15-4610-a17b-0e9b63a43132
2026-02-01 13:54:38.690 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 13:54:38.690 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 13:54:38.691 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 13:54:38.692 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 13:54:38.721 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 13:54:39.441 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769975679248_127.0.0.1_52241
2026-02-01 13:54:39.442 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Notify connected event to listeners.
2026-02-01 13:54:39.442 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 13:54:39.442 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 13:54:39.443 [main] INFO  com.alibaba.nacos.common.remote.client - [4eaf2f54-ad15-4610-a17b-0e9b63a43132] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1290/0x000001bf819adae0
2026-02-01 13:54:39.443 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 13:54:39.457 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 13:54:39.544 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.44 seconds (process running for 5.904)
2026-02-01 13:55:07.754 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 13:55:07.754 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 13:55:07.755 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-01 13:55:07.763 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 13:55:07.848 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2002}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 13:55:08.112 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 13:55:08.273 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2002(Long)
2026-02-01 13:55:08.295 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 13:55:08.338 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - ==>  Preparing: select count(1) from t_comment_like where user_id = ? and comment_id = ? limit 1
2026-02-01 13:55:08.341 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - ==> Parameters: 3(Long), 2002(Long)
2026-02-01 13:55:08.359 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - <==      Total: 1
2026-02-01 13:55:08.362 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentLikeDOMapper.selectByUserId - ==>  Preparing: select comment_id from t_comment_like where user_id = ?
2026-02-01 13:55:08.362 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentLikeDOMapper.selectByUserId - ==> Parameters: 3(Long)
2026-02-01 13:55:08.363 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentLikeDOMapper.selectByUserId - <==      Total: 0
2026-02-01 13:55:08.385 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 537ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 13:55:08.400 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 13:55:08.405 [NettyClientPublicExecutor_1] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001DCD863947C6B02FC97ED0000, offsetMsgId=7F00000100002A9F00000000000068D7, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=4]
2026-02-01 14:38:00.848 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 14:38:00.848 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 14:38:00.849 [Thread-13] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 14:38:00.850 [Thread-16] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 14:38:00.870 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:38:00.871 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:38:00.875 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:38:00.875 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:38:00.905 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 14:38:00.905 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@23639607[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 14:38:00.910 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769975679248_127.0.0.1_52241
2026-02-01 14:38:00.911 [nacos-grpc-client-executor-127.0.0.1-537] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769975679248_127.0.0.1_52241]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 14:38:00.914 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1fb9d568[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 538]
2026-02-01 14:38:00.914 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@7a4ea668[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 866]
2026-02-01 14:38:00.914 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 14:38:00.914 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 14:38:00.914 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 14:38:00.921 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:38:00.921 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:38:00.921 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:38:00.921 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:38:01.056 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:38:01.056 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:38:01.059 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 14:38:01.061 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 14:38:06.378 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:38:06.432 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:38:06.811 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:38:06.823 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:38:06.823 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 14:38:06.837 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 14:38:07.339 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 14:38:07.342 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 14:38:07.364 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2026-02-01 14:38:07.571 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=97b2d171-e1a1-3eea-b4e8-08168cf4a796
2026-02-01 14:38:07.611 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.613 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.614 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.842 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.904 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.907 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.912 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.914 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000002b3e2545568] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.916 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.922 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:07.923 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:38:08.169 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 14:38:08.179 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 14:38:08.179 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 14:38:08.265 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 14:38:08.265 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1425 ms
2026-02-01 14:38:08.349 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 14:38:08.599 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 14:38:08.838 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 14:38:08.906 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 14:38:09.393 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:38:09.393 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 14:38:09.436 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:38:09.436 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 14:38:09.486 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 14:38:09.502 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 14:38:10.312 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 14:38:10.317 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:38:10.317 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 14:38:10.318 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 14:38:10.318 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 14:38:10.344 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 14:38:10.344 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 14:38:10.345 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 14:38:10.350 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 14:38:10.350 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 14:38:10.353 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 14:38:10.361 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 8ed127d2-9884-4bcf-ab82-4c86781c8fd2
2026-02-01 14:38:10.382 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 14:38:10.382 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 14:38:10.382 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 14:38:10.384 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 14:38:10.410 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 14:38:10.739 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 5
2026-02-01 14:38:10.742 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:30:14"}
2026-02-01 14:38:10.768 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:47"}
2026-02-01 14:38:10.770 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:48"}
2026-02-01 14:38:10.770 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2001,"type":1,"createTime":"2026-02-01 13:33:25"}
2026-02-01 14:38:10.770 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2002,"type":1,"createTime":"2026-02-01 13:55:08"}
2026-02-01 14:38:10.812 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==>  Preparing: INSERT INTO t_comment_like (comment_id, user_id, create_time) VALUES (?, ?, ?) , (?, ?, ?) , (?, ?, ?) ON DUPLICATE KEY UPDATE id=id
2026-02-01 14:38:11.020 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==> Parameters: 2001(Long), null, 2026-02-01T13:31:48(LocalDateTime), 2001(Long), 3(Long), 2026-02-01T13:33:25(LocalDateTime), 2002(Long), 3(Long), 2026-02-01T13:55:08(LocalDateTime)
2026-02-01 14:38:11.102 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] ERROR c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - 
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
### The error may exist in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentLikeDOMapper.xml]
### The error may involve com.evan.greennote.comment.biz.domain.mapper.CommentLikeDOMapper.batchInsert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO t_comment_like (comment_id, user_id, create_time)         VALUES                        (?, ?, ?)          ,              (?, ?, ?)          ,              (?, ?, ?)                   ON DUPLICATE KEY UPDATE id=id
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
; Column 'user_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:95)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:95)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy86.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy103.batchInsert(Unknown Source)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.executeBatchSQL(LikeUnlikeComment2DBConsumer.java:160)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.lambda$mqPushConsumer$3(LikeUnlikeComment2DBConsumer.java:114)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy120.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 14 common frames omitted
2026-02-01 14:38:11.151 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769978290987_127.0.0.1_52506
2026-02-01 14:38:11.152 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Notify connected event to listeners.
2026-02-01 14:38:11.152 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 14:38:11.152 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 14:38:11.152 [main] INFO  com.alibaba.nacos.common.remote.client - [8ed127d2-9884-4bcf-ab82-4c86781c8fd2] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1317/0x000002b3e2a6fdd0
2026-02-01 14:38:11.153 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 14:38:11.165 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 14:38:11.263 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.456 seconds (process running for 5.882)
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 5
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:30:14"}
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:47"}
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:48"}
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2001,"type":1,"createTime":"2026-02-01 13:33:25"}
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2002,"type":1,"createTime":"2026-02-01 13:55:08"}
2026-02-01 14:38:12.108 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==>  Preparing: INSERT INTO t_comment_like (comment_id, user_id, create_time) VALUES (?, ?, ?) , (?, ?, ?) , (?, ?, ?) ON DUPLICATE KEY UPDATE id=id
2026-02-01 14:38:12.109 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==> Parameters: 2001(Long), null, 2026-02-01T13:31:48(LocalDateTime), 2001(Long), 3(Long), 2026-02-01T13:33:25(LocalDateTime), 2002(Long), 3(Long), 2026-02-01T13:55:08(LocalDateTime)
2026-02-01 14:38:12.110 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] ERROR c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - 
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
### The error may exist in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentLikeDOMapper.xml]
### The error may involve com.evan.greennote.comment.biz.domain.mapper.CommentLikeDOMapper.batchInsert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO t_comment_like (comment_id, user_id, create_time)         VALUES                        (?, ?, ?)          ,              (?, ?, ?)          ,              (?, ?, ?)                   ON DUPLICATE KEY UPDATE id=id
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
; Column 'user_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:95)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:95)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy86.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy103.batchInsert(Unknown Source)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.executeBatchSQL(LikeUnlikeComment2DBConsumer.java:160)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.lambda$mqPushConsumer$3(LikeUnlikeComment2DBConsumer.java:114)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy120.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 14 common frames omitted
2026-02-01 14:38:13.112 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 5
2026-02-01 14:38:13.113 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:30:14"}
2026-02-01 14:38:13.113 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:47"}
2026-02-01 14:38:13.113 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:48"}
2026-02-01 14:38:13.113 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2001,"type":1,"createTime":"2026-02-01 13:33:25"}
2026-02-01 14:38:13.113 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2002,"type":1,"createTime":"2026-02-01 13:55:08"}
2026-02-01 14:38:13.114 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==>  Preparing: INSERT INTO t_comment_like (comment_id, user_id, create_time) VALUES (?, ?, ?) , (?, ?, ?) , (?, ?, ?) ON DUPLICATE KEY UPDATE id=id
2026-02-01 14:38:13.114 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==> Parameters: 2001(Long), null, 2026-02-01T13:31:48(LocalDateTime), 2001(Long), 3(Long), 2026-02-01T13:33:25(LocalDateTime), 2002(Long), 3(Long), 2026-02-01T13:55:08(LocalDateTime)
2026-02-01 14:38:13.116 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] ERROR c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - 
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
### The error may exist in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentLikeDOMapper.xml]
### The error may involve com.evan.greennote.comment.biz.domain.mapper.CommentLikeDOMapper.batchInsert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO t_comment_like (comment_id, user_id, create_time)         VALUES                        (?, ?, ?)          ,              (?, ?, ?)          ,              (?, ?, ?)                   ON DUPLICATE KEY UPDATE id=id
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
; Column 'user_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:95)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:95)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy86.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy103.batchInsert(Unknown Source)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.executeBatchSQL(LikeUnlikeComment2DBConsumer.java:160)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.lambda$mqPushConsumer$3(LikeUnlikeComment2DBConsumer.java:114)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy120.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 14 common frames omitted
2026-02-01 14:38:14.118 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 5
2026-02-01 14:38:14.118 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:30:14"}
2026-02-01 14:38:14.119 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:47"}
2026-02-01 14:38:14.119 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":null,"commentId":2001,"type":1,"createTime":"2026-02-01 13:31:48"}
2026-02-01 14:38:14.120 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2001,"type":1,"createTime":"2026-02-01 13:33:25"}
2026-02-01 14:38:14.120 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2002,"type":1,"createTime":"2026-02-01 13:55:08"}
2026-02-01 14:38:14.120 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==>  Preparing: INSERT INTO t_comment_like (comment_id, user_id, create_time) VALUES (?, ?, ?) , (?, ?, ?) , (?, ?, ?) ON DUPLICATE KEY UPDATE id=id
2026-02-01 14:38:14.121 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==> Parameters: 2001(Long), null, 2026-02-01T13:31:48(LocalDateTime), 2001(Long), 3(Long), 2026-02-01T13:33:25(LocalDateTime), 2002(Long), 3(Long), 2026-02-01T13:55:08(LocalDateTime)
2026-02-01 14:38:14.123 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_4] ERROR c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - 
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
### The error may exist in file [C:\Users\12482\IdeaProjects\GreenNote\GreenNote-comment\GreenNote-comment-biz\target\classes\mapper\CommentLikeDOMapper.xml]
### The error may involve com.evan.greennote.comment.biz.domain.mapper.CommentLikeDOMapper.batchInsert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO t_comment_like (comment_id, user_id, create_time)         VALUES                        (?, ?, ?)          ,              (?, ?, ?)          ,              (?, ?, ?)                   ON DUPLICATE KEY UPDATE id=id
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
; Column 'user_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:95)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:95)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy86.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy103.batchInsert(Unknown Source)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.executeBatchSQL(LikeUnlikeComment2DBConsumer.java:160)
	at com.evan.greennote.comment.biz.consumer.LikeUnlikeComment2DBConsumer.lambda$mqPushConsumer$3(LikeUnlikeComment2DBConsumer.java:114)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy120.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 14 common frames omitted
2026-02-01 14:46:07.999 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 14:46:07.999 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 14:46:07.999 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 14:46:08.000 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 14:46:08.008 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:46:08.008 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:46:08.012 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:46:08.012 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:46:08.030 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 14:46:08.031 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 14:46:08.033 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1e121c59[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 14:46:08.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769978290987_127.0.0.1_52506
2026-02-01 14:46:08.035 [nacos-grpc-client-executor-127.0.0.1-110] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769978290987_127.0.0.1_52506]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 14:46:08.038 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@62cac57b[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 111]
2026-02-01 14:46:08.038 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@189e88c5[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 159]
2026-02-01 14:46:08.038 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 14:46:08.038 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 14:46:08.038 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 14:46:08.056 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:46:08.057 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:46:08.061 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:46:08.061 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:46:08.061 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:46:08.061 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:46:08.077 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 14:46:08.078 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 14:46:08.079 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 14:46:08.084 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 14:46:10.605 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:46:10.663 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:46:11.039 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:46:11.049 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:46:11.051 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 14:46:11.063 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 14:46:11.563 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 14:46:11.566 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 14:46:11.585 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2026-02-01 14:46:11.788 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=97b2d171-e1a1-3eea-b4e8-08168cf4a796
2026-02-01 14:46:11.828 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:11.830 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:11.831 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.060 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.109 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.111 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.115 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.115 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x0000028d96544bf8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.116 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.120 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.121 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 14:46:12.344 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 14:46:12.353 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 14:46:12.353 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 14:46:12.441 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 14:46:12.442 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1375 ms
2026-02-01 14:46:12.522 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 14:46:12.776 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 14:46:13.021 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 14:46:13.086 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 14:46:13.576 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:46:13.577 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 14:46:13.621 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 14:46:13.621 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 14:46:13.670 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 14:46:13.686 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 14:46:14.438 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 14:46:14.443 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 14:46:14.443 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 14:46:14.444 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 14:46:14.444 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 14:46:14.465 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 14:46:14.465 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 14:46:14.466 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 14:46:14.469 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 14:46:14.469 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 14:46:14.471 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 14:46:14.479 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 6b2633e5-2932-4fd8-a40d-d9df9cd70798
2026-02-01 14:46:14.496 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 14:46:14.496 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 14:46:14.496 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 14:46:14.498 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 14:46:14.527 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 14:46:15.256 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769978775066_127.0.0.1_1718
2026-02-01 14:46:15.258 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Notify connected event to listeners.
2026-02-01 14:46:15.258 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 14:46:15.258 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 14:46:15.258 [main] INFO  com.alibaba.nacos.common.remote.client - [6b2633e5-2932-4fd8-a40d-d9df9cd70798] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1291/0x0000028d969b2110
2026-02-01 14:46:15.259 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 14:46:15.270 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 14:46:15.356 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.356 seconds (process running for 5.788)
2026-02-01 14:47:12.377 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 14:47:12.378 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 14:47:12.379 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2026-02-01 14:47:12.388 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 14:47:12.410 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 14:47:26.556 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 14:47:26.629 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论取消点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: unlikeComment =======
2026-02-01 14:47:26.916 [http-nio-8093-exec-2] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/unlike request fail, errorCode: COMMENT-20003, errorMessage: 您未点赞该评论，无法取消点赞
2026-02-01 14:47:26.920 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 14:47:33.471 [http-nio-8093-exec-5] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 14:47:33.475 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 14:47:33.487 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 12ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 14:47:33.489 [http-nio-8093-exec-5] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 14:47:33.507 [NettyClientPublicExecutor_1] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000010D7C63947C6B032C957B0000, offsetMsgId=7F00000100002A9F000000000000760B, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=5]
2026-02-01 14:47:33.513 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 1
2026-02-01 14:47:33.515 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2001,"type":1,"createTime":"2026-02-01 14:47:33"}
2026-02-01 14:47:33.552 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==>  Preparing: INSERT INTO t_comment_like (comment_id, user_id, create_time) VALUES (?, ?, ?) ON DUPLICATE KEY UPDATE id=id
2026-02-01 14:47:33.753 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==> Parameters: 2001(Long), 3(Long), 2026-02-01T14:47:33(LocalDateTime)
2026-02-01 14:47:33.808 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - <==    Updates: 1
2026-02-01 14:47:35.219 [http-nio-8093-exec-7] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 14:47:35.220 [http-nio-8093-exec-7] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 14:47:35.225 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - ==>  Preparing: select count(1) from t_comment_like where user_id = ? and comment_id = ? limit 1
2026-02-01 14:47:35.237 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - ==> Parameters: 3(Long), 2001(Long)
2026-02-01 14:47:35.258 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - <==      Total: 1
2026-02-01 14:47:35.259 [http-nio-8093-exec-7] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/like request fail, errorCode: COMMENT-20002, errorMessage: 您已经点赞过该评论
2026-02-01 14:47:35.261 [http-nio-8093-exec-7] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 14:47:38.646 [http-nio-8093-exec-10] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 14:47:38.648 [http-nio-8093-exec-10] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论取消点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: unlikeComment =======
2026-02-01 14:47:38.653 [http-nio-8093-exec-10] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论取消点赞], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 14:47:38.654 [http-nio-8093-exec-10] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 14:47:38.656 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000010D7C63947C6B032CA99D0001, offsetMsgId=7F00000100002A9F00000000000077A6, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=6]
2026-02-01 14:47:38.658 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 1
2026-02-01 14:47:38.658 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: UnLike, Received message: {"userId":3,"commentId":2001,"type":0,"createTime":"2026-02-01 14:47:38"}
2026-02-01 14:47:38.659 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchDelete - ==>  Preparing: DELETE FROM t_comment_like WHERE (comment_id, user_id) IN ( (?, ?) )
2026-02-01 14:47:38.661 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchDelete - ==> Parameters: 2001(Long), 3(Long)
2026-02-01 14:47:38.676 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_2] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchDelete - <==    Updates: 1
2026-02-01 14:47:41.418 [http-nio-8093-exec-6] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 14:47:41.419 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [评论点赞], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: likeComment =======
2026-02-01 14:47:41.423 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - ==>  Preparing: select count(1) from t_comment_like where user_id = ? and comment_id = ? limit 1
2026-02-01 14:47:41.424 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - ==> Parameters: 3(Long), 2001(Long)
2026-02-01 14:47:41.425 [http-nio-8093-exec-6] DEBUG c.e.g.c.b.d.m.C.selectCountByUserIdAndCommentId - <==      Total: 1
2026-02-01 14:47:41.426 [http-nio-8093-exec-6] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [评论点赞], 耗时: 7ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 14:47:41.427 [http-nio-8093-exec-6] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 14:47:41.429 [NettyClientPublicExecutor_3] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000010D7C63947C6B032CB4720002, offsetMsgId=7F00000100002A9F0000000000007943, messageQueue=MessageQueue [topic=CommentLikeUnlikeTopic, brokerName=broker-a, queueId=3], queueOffset=7]
2026-02-01 14:47:41.429 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】本批次消息大小: 1
2026-02-01 14:47:41.430 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] INFO  c.e.g.c.biz.consumer.LikeUnlikeComment2DBConsumer - ==> 【评论点赞、取消点赞】Consumer - Tag: Like, Received message: {"userId":3,"commentId":2001,"type":1,"createTime":"2026-02-01 14:47:41"}
2026-02-01 14:47:41.430 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==>  Preparing: INSERT INTO t_comment_like (comment_id, user_id, create_time) VALUES (?, ?, ?) ON DUPLICATE KEY UPDATE id=id
2026-02-01 14:47:41.431 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - ==> Parameters: 2001(Long), 3(Long), 2026-02-01T14:47:41(LocalDateTime)
2026-02-01 14:47:41.437 [ConsumeMessageThread_greennote_group_CommentLikeUnlikeTopic_3] DEBUG c.e.g.c.b.d.mapper.CommentLikeDOMapper.batchInsert - <==    Updates: 1
2026-02-01 15:32:26.930 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 15:32:26.930 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 15:32:26.932 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 15:32:26.933 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 15:32:26.950 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 15:32:26.951 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 15:32:26.954 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 15:32:26.954 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 15:32:26.986 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 15:32:26.986 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 15:32:26.990 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 15:32:26.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@562160fb[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 15:32:26.992 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769978775066_127.0.0.1_1718
2026-02-01 15:32:26.993 [nacos-grpc-client-executor-127.0.0.1-575] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769978775066_127.0.0.1_1718]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 15:32:26.995 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@20843fd4[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 576]
2026-02-01 15:32:26.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@25671bdd[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 923]
2026-02-01 15:32:26.995 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 15:32:26.995 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 15:32:26.996 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 15:32:27.006 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 15:32:27.006 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 15:32:27.011 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 15:32:27.011 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 15:32:27.011 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 15:32:27.011 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 15:32:27.138 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 15:32:27.138 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 15:32:27.141 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 15:32:27.142 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 15:32:31.498 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 15:32:31.561 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 15:32:32.025 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 15:32:32.040 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 15:32:32.041 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 15:32:32.060 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 15:32:32.664 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 15:32:32.668 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 15:32:32.699 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2026-02-01 15:32:32.999 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=97b2d171-e1a1-3eea-b4e8-08168cf4a796
2026-02-01 15:32:33.067 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.069 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.071 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.348 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.437 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.441 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.445 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.446 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000001d2815440c0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.449 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.458 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.460 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 15:32:33.839 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 15:32:33.851 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 15:32:33.852 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 15:32:33.964 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 15:32:33.964 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1901 ms
2026-02-01 15:32:34.071 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 15:32:34.377 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 15:32:34.653 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 15:32:34.733 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 15:32:35.326 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 15:32:35.326 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 15:32:35.396 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 15:32:35.396 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 15:32:35.468 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 15:32:35.493 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 15:32:36.660 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 15:32:36.669 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 15:32:36.669 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 15:32:36.670 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 15:32:36.671 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 15:32:36.706 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 15:32:36.707 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 15:32:36.708 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 15:32:36.714 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 15:32:36.714 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 15:32:36.717 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 15:32:36.728 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 93fb1ff5-aded-4f83-b61c-3c93c5b667a9
2026-02-01 15:32:36.752 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 15:32:36.752 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 15:32:36.753 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 15:32:36.756 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 15:32:36.797 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 15:32:37.622 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769981557426_127.0.0.1_24320
2026-02-01 15:32:37.622 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Notify connected event to listeners.
2026-02-01 15:32:37.622 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 15:32:37.622 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 15:32:37.623 [main] INFO  com.alibaba.nacos.common.remote.client - [93fb1ff5-aded-4f83-b61c-3c93c5b667a9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1291/0x000001d2819b18c0
2026-02-01 15:32:37.624 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 15:32:37.643 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 15:32:37.797 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 6.958 seconds (process running for 7.472)
2026-02-01 15:35:53.004 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 15:35:53.004 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 15:35:53.005 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-01 15:35:53.012 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 15:35:53.031 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 16:11:00.716 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 16:11:00.716 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 16:11:00.716 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 16:11:00.717 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 16:11:00.756 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:11:00.761 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:11:00.767 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:11:00.768 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:11:00.834 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 16:11:00.835 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 16:11:00.843 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 16:11:00.844 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 16:11:00.844 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 16:11:00.845 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 16:11:00.845 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 16:11:00.845 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 16:11:00.845 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 16:11:00.845 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4f99eecc[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 16:11:00.846 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769981557426_127.0.0.1_24320
2026-02-01 16:11:00.848 [nacos-grpc-client-executor-127.0.0.1-482] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769981557426_127.0.0.1_24320]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 16:11:00.853 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7cc9cbaf[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 483]
2026-02-01 16:11:00.853 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@682414a8[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 767]
2026-02-01 16:11:00.854 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 16:11:00.854 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 16:11:00.854 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 16:11:00.871 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:11:00.872 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:11:00.877 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:11:00.877 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:11:00.878 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:11:00.878 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:11:00.909 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:11:00.909 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:11:00.915 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 16:11:00.917 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 16:11:17.109 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:11:17.182 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:11:17.632 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:11:17.647 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:11:17.647 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 16:11:17.666 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 16:11:18.375 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 16:11:18.381 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 16:11:18.411 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2026-02-01 16:11:18.739 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=97b2d171-e1a1-3eea-b4e8-08168cf4a796
2026-02-01 16:11:18.821 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:18.824 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:18.825 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.206 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.303 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.311 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.315 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.316 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x0000025a915249d0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.320 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.326 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.327 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:11:19.625 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 16:11:19.639 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 16:11:19.640 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 16:11:19.780 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 16:11:19.780 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2108 ms
2026-02-01 16:11:19.905 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 16:11:20.249 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 16:11:20.642 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 16:11:20.782 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 16:11:21.612 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:11:21.613 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 16:11:21.692 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:11:21.699 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 16:11:21.790 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 16:11:21.821 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 16:11:23.163 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 16:11:23.172 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:11:23.172 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 16:11:23.173 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 16:11:23.173 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 16:11:23.212 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 16:11:23.213 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 16:11:23.213 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 16:11:23.220 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 16:11:23.220 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 16:11:23.225 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 16:11:23.240 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of e8fb8194-161d-4fae-bf80-6bebca1e2c4d
2026-02-01 16:11:23.271 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 16:11:23.271 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 16:11:23.272 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 16:11:23.275 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 16:11:23.322 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 16:11:24.461 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769983884224_127.0.0.1_14218
2026-02-01 16:11:24.462 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Notify connected event to listeners.
2026-02-01 16:11:24.462 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 16:11:24.463 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 16:11:24.463 [main] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1291/0x0000025a919b4f78
2026-02-01 16:11:24.464 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 16:11:24.482 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 16:11:24.687 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 8.359 seconds (process running for 9.271)
2026-02-01 16:12:13.175 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 16:12:13.176 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 16:12:13.176 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2026-02-01 16:12:13.184 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 16:12:13.261 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":2023}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:12:13.283 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:12:13.445 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2023(Long)
2026-02-01 16:12:13.463 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:12:13.468 [http-nio-8093-exec-1] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/delete request fail, errorCode: COMMENT-20004, errorMessage: 您无法操作该评论
2026-02-01 16:12:13.480 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 16:13:00.339 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 16:13:00.340 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":2023}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:13:00.341 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:13:00.341 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2023(Long)
2026-02-01 16:13:00.343 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:13:00.343 [http-nio-8093-exec-2] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/delete request fail, errorCode: COMMENT-20004, errorMessage: 您无法操作该评论
2026-02-01 16:13:00.344 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 16:13:24.824 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-02-01 16:13:24.829 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [发布评论], 入参: {"noteId":1862482047415615578,"content":"这是一条测试2级评论HHH","imageUrl":null,"replyCommentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: publishComment =======
2026-02-01 16:13:24.830 [http-nio-8093-exec-3] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-02-01 16:13:24.893 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2026-02-01 16:13:24.905 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.140.64.238","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 16:13:24.912 [http-nio-8093-exec-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-distributed-id-generator -> [{"ip":"10.140.64.238","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 16:13:25.048 [http-nio-8093-exec-3] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 开始异步发送 MQ, Topic: PublishCommentTopic, Body: {"noteId":1862482047415615578,"content":"这是一条测试2级评论HHH","imageUrl":null,"replyCommentId":2001,"createTime":"2026-02-01 16:13:25","creatorId":100,"commentId":6001}
2026-02-01 16:13:25.053 [http-nio-8093-exec-3] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [发布评论], 耗时: 225ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 16:13:25.056 [http-nio-8093-exec-3] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-02-01 16:13:25.081 [NettyClientPublicExecutor_1] INFO  c.e.greennote.comment.biz.retry.SendMqRetryHelper - ==> 【评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001907063947C6B037B30CA0000, offsetMsgId=7F00000100002A9F0000000000007C64, messageQueue=MessageQueue [topic=PublishCommentTopic, brokerName=broker-a, queueId=0], queueOffset=6]
2026-02-01 16:13:25.087 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 本批次消息大小: 1
2026-02-01 16:13:25.090 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> Consumer - Received message: {"noteId":1862482047415615578,"content":"这是一条测试2级评论HHH","imageUrl":null,"replyCommentId":2001,"createTime":"2026-02-01 16:13:25","creatorId":100,"commentId":6001}
2026-02-01 16:13:25.111 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-02-01 16:13:25.112 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-02-01 16:13:25.114 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-02-01 16:13:25.122 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ## 清洗后的 CommentBOS: [{"id":6001,"noteId":1862482047415615578,"userId":100,"contentUuid":"150c3d8a-70f6-4a1c-9591-8c8dcf567dd8","content":"这是一条测试2级评论HHH","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-02-01 16:13:25","updateTime":"2026-02-01 16:13:25"}]
2026-02-01 16:13:25.129 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==>  Preparing: insert IGNORE into t_comment (id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time ) values (?, ?, ?, ?, ? , ?, ?, ?, ?, ? , ?, ?, ?, ?, ?)
2026-02-01 16:13:25.223 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - ==> Parameters: 6001(Long), 1862482047415615578(Long), 100(Long), 150c3d8a-70f6-4a1c-9591-8c8dcf567dd8(String), false(Boolean), (String), 2(Integer), 0(Long), 0(Long), 2001(Long), 2001(Long), 100(Long), false(Boolean), 2026-02-01T16:13:25(LocalDateTime), 2026-02-01T16:13:25(LocalDateTime)
2026-02-01 16:13:25.229 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] DEBUG c.e.g.c.b.d.mapper.CommentDOMapper.batchInsert - <==    Updates: 1
2026-02-01 16:13:25.248 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-02-01 16:13:25.286 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 16:13:25.287 [ConsumeMessageThread_greennote_group_PublishCommentTopic_1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 16:13:25.454 [nacos-grpc-client-executor-127.0.0.1-38] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Receive server push request, request = NotifySubscriberRequest, requestId = 79
2026-02-01 16:13:25.454 [nacos-grpc-client-executor-127.0.0.1-38] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Ack server push request, request = NotifySubscriberRequest, requestId = 79
2026-02-01 16:13:25.566 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.consumer.Comment2DBConsumer - ==> 【计数: 评论发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001907063947C6B037B32B90001, offsetMsgId=7F00000100002A9F0000000000007E5D, messageQueue=MessageQueue [topic=CountNoteCommentTopic, brokerName=broker-a, queueId=0], queueOffset=2]
2026-02-01 16:13:25.770 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Receive server push request, request = NotifySubscriberRequest, requestId = 80
2026-02-01 16:13:25.771 [nacos-grpc-client-executor-127.0.0.1-39] INFO  com.alibaba.nacos.common.remote.client - [e8fb8194-161d-4fae-bf80-6bebca1e2c4d] Ack server push request, request = NotifySubscriberRequest, requestId = 80
2026-02-01 16:13:26.579 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, size: 1
2026-02-01 16:13:26.579 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.b.c.OneLevelCommentFirstReplyCommentIdUpdateConsumer - ==> 【一级评论 first_reply_comment_id 更新】聚合消息, ["[{\"noteId\":1862482047415615578,\"commentId\":6001,\"level\":2,\"parentId\":2001}]"]
2026-02-01 16:13:26.838 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-02-01 16:13:26.839 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-02-01 16:13:26.840 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-02-01 16:13:29.032 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-02-01 16:13:29.032 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-02-01 16:13:29.040 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-02-01 16:13:29.040 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-02-01 16:13:29.041 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-02-01 16:13:29.042 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-02-01 16:13:29.044 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-02-01 16:13:29.046 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 6.5(Double), 2001(Long)
2026-02-01 16:13:29.052 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-02-01 16:14:00.198 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 3
2026-02-01 16:14:00.198 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":6001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:14:00.200 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:14:00.201 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 6001(Long)
2026-02-01 16:14:00.203 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:14:00.203 [http-nio-8093-exec-4] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/delete request fail, errorCode: COMMENT-20004, errorMessage: 您无法操作该评论
2026-02-01 16:14:00.204 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 3
2026-02-01 16:14:55.480 [http-nio-8093-exec-5] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":6001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:14:55.480 [http-nio-8093-exec-5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:14:55.481 [http-nio-8093-exec-5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 6001(Long)
2026-02-01 16:14:55.482 [http-nio-8093-exec-5] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:14:55.483 [http-nio-8093-exec-5] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/delete request fail, errorCode: COMMENT-20004, errorMessage: 您无法操作该评论
2026-02-01 16:23:14.647 [http-nio-8093-exec-7] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-02-01 16:23:14.648 [http-nio-8093-exec-7] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":6001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:23:14.649 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:23:14.649 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 6001(Long)
2026-02-01 16:23:14.651 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:23:14.652 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==>  Preparing: delete from t_comment where id = ?
2026-02-01 16:23:14.654 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==> Parameters: 6001(Long)
2026-02-01 16:23:14.655 [http-nio-8093-exec-7] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - <==    Updates: 1
2026-02-01 16:23:14.658 [http-nio-8093-exec-7] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-02-01 16:23:14.755 [http-nio-8093-exec-7] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [删除评论], 耗时: 107ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 16:23:14.756 [http-nio-8093-exec-7] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-02-01 16:23:14.771 [NettyClientPublicExecutor_4] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论删除】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001907063947C6B038430470003, offsetMsgId=7F00000100002A9F000000000000828D, messageQueue=MessageQueue [topic=DeleteCommentTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2026-02-01 16:23:14.771 [NettyClientPublicExecutor_3] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【删除评论详情本地缓存】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001907063947C6B038430440002, offsetMsgId=7F00000100002A9F000000000000813D, messageQueue=MessageQueue [topic=DeleteCommentDetailLocalCacheTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2026-02-01 16:23:18.749 [http-nio-8093-exec-9] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-02-01 16:23:18.750 [http-nio-8093-exec-9] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":6001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:23:18.750 [http-nio-8093-exec-9] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:23:18.751 [http-nio-8093-exec-9] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 6001(Long)
2026-02-01 16:23:18.752 [http-nio-8093-exec-9] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 0
2026-02-01 16:23:18.753 [http-nio-8093-exec-9] WARN  c.e.g.comment.biz.exception.GlobalExceptionHandler - /comment/delete request fail, errorCode: COMMENT-20001, errorMessage: 此评论不存在
2026-02-01 16:23:18.753 [http-nio-8093-exec-9] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-02-01 16:36:01.122 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 16:36:01.122 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 16:36:01.122 [Thread-14] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 16:36:01.126 [Thread-17] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 16:36:01.135 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:36:01.135 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:36:01.140 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:36:01.140 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:36:01.166 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 16:36:01.167 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 16:36:01.169 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@7e98b359[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 16:36:01.170 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769983884224_127.0.0.1_14218
2026-02-01 16:36:01.171 [nacos-grpc-client-executor-127.0.0.1-321] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769983884224_127.0.0.1_14218]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 16:36:01.179 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@443eefb1[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 322]
2026-02-01 16:36:01.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@23cba012[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 491]
2026-02-01 16:36:01.179 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 16:36:01.179 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 16:36:01.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 16:36:01.189 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:36:01.189 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:36:01.193 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:36:01.193 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:36:01.194 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:36:01.194 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:36:01.312 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 16:36:01.312 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 16:36:01.314 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 16:36:01.318 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 16:36:07.846 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:36:07.900 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:36:08.250 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:36:08.260 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:36:08.261 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 16:36:08.275 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 16:36:08.803 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 16:36:08.806 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 16:36:08.825 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2026-02-01 16:36:09.025 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=d98afbae-ec65-34ac-8e93-4c382f596ce1
2026-02-01 16:36:09.068 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.070 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.071 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.291 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.342 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.344 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.346 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.347 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000001a3dd545568] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.348 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.353 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.354 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 16:36:09.601 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 16:36:09.615 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 16:36:09.615 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 16:36:09.719 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 16:36:09.720 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1442 ms
2026-02-01 16:36:09.810 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 16:36:10.094 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 16:36:10.388 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 16:36:10.501 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 16:36:11.069 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:36:11.069 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 16:36:11.122 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:36:11.123 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 16:36:11.151 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] INFO  c.e.g.comment.biz.consumer.DeleteCommentConsumer - ## 【删除评论 - 后续业务处理】消费者消费成功, body: {"id":6001,"noteId":1862482047415615578,"userId":100,"contentUuid":"150c3d8a-70f6-4a1c-9591-8c8dcf567dd8","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-02-01 16:13:25","updateTime":"2026-02-01 16:13:25","childCommentTotal":null,"firstReplyCommentId":null,"heat":null}
2026-02-01 16:36:11.172 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 16:36:11.187 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 16:36:11.217 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] DEBUG c.e.g.c.b.d.m.C.selectByReplyCommentId - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where reply_comment_id = ?
2026-02-01 16:36:11.239 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentDetailLocalCacheTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentDetailLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:36:11.240 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteCommentLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2026-02-01 16:36:11.283 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 16:36:11.284 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2026-02-01 16:36:11.406 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] DEBUG c.e.g.c.b.d.m.C.selectByReplyCommentId - ==> Parameters: 6001(Long)
2026-02-01 16:36:11.423 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] DEBUG c.e.g.c.b.d.m.C.selectByReplyCommentId - <==      Total: 0
2026-02-01 16:36:11.644 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:36:11.645 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 16:36:11.650 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:36:11.685 [NettyClientPublicExecutor_1] INFO  c.e.g.comment.biz.consumer.DeleteCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B03900B1B0000, offsetMsgId=7F00000100002A9F0000000000008553, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2026-02-01 16:36:12.042 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 16:36:12.049 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 16:36:12.049 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 16:36:12.050 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 16:36:12.050 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 16:36:12.075 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 16:36:12.076 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 16:36:12.076 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 16:36:12.079 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 16:36:12.080 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 16:36:12.082 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 16:36:12.092 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 9756d63c-f012-4c9e-8ab5-eebf7f9e86ab
2026-02-01 16:36:12.115 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 16:36:12.116 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 16:36:12.116 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 16:36:12.117 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 16:36:12.124 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 16:36:13.137 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769985372958_127.0.0.1_3137
2026-02-01 16:36:13.138 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Notify connected event to listeners.
2026-02-01 16:36:13.138 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 16:36:13.138 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 16:36:13.138 [main] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1389/0x000001a3dda81680
2026-02-01 16:36:13.140 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 16:36:13.152 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 16:36:13.239 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 6.111 seconds (process running for 6.673)
2026-02-01 16:36:13.727 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-02-01 16:36:13.730 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-02-01 16:36:13.733 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-02-01 16:36:13.760 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-02-01 16:36:13.761 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-02-01 16:36:13.762 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-02-01 16:36:13.765 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-02-01 16:36:13.768 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 6.5(Double), 2001(Long)
2026-02-01 16:36:13.770 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-02-01 16:36:34.445 [http-nio-8093-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 16:36:34.445 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 16:36:34.446 [http-nio-8093-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-01 16:36:34.452 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-02-01 16:36:34.537 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":4001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:36:34.537 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:36:34.538 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 4001(Long)
2026-02-01 16:36:34.539 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:36:34.544 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==>  Preparing: delete from t_comment where id = ?
2026-02-01 16:36:34.545 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==> Parameters: 4001(Long)
2026-02-01 16:36:34.547 [http-nio-8093-exec-1] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - <==    Updates: 1
2026-02-01 16:36:34.556 [http-nio-8093-exec-1] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-02-01 16:36:34.614 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:GreenNote-kv, group:DEFAULT_GROUP, clusters: 
2026-02-01 16:36:34.623 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 16:36:34.632 [http-nio-8093-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@GreenNote-kv -> [{"ip":"10.140.64.238","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@GreenNote-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2026-02-01 16:36:34.709 [http-nio-8093-exec-1] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [删除评论], 耗时: 173ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 16:36:34.717 [NettyClientPublicExecutor_3] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【删除评论详情本地缓存】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B039065140001, offsetMsgId=7F00000100002A9F00000000000086A1, messageQueue=MessageQueue [topic=DeleteCommentDetailLocalCacheTopic, brokerName=broker-a, queueId=2], queueOffset=0]
2026-02-01 16:36:34.717 [NettyClientPublicExecutor_2] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论删除】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B039065170002, offsetMsgId=7F00000100002A9F00000000000087F1, messageQueue=MessageQueue [topic=DeleteCommentTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2026-02-01 16:36:34.720 [ConsumeMessageThread_greennote_group_DeleteCommentDetailLocalCacheTopic_1] INFO  c.e.g.c.b.consumer.DeleteCommentLocalCacheConsumer - ## 消费者消费成功, commentId: 4001
2026-02-01 16:36:34.722 [http-nio-8093-exec-1] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-02-01 16:36:34.722 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] INFO  c.e.g.comment.biz.consumer.DeleteCommentConsumer - ## 【删除评论 - 后续业务处理】消费者消费成功, body: {"id":4001,"noteId":1862482047415615500,"userId":100,"contentUuid":"16640855-5dae-482d-a0dd-745240f04665","isContentEmpty":false,"imageUrl":"","level":2,"replyTotal":0,"likeTotal":0,"parentId":2001,"replyCommentId":2001,"replyUserId":100,"isTop":false,"createTime":"2026-01-31 23:38:01","updateTime":"2026-01-31 23:38:01","childCommentTotal":null,"firstReplyCommentId":null,"heat":null}
2026-02-01 16:36:34.723 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] DEBUG c.e.g.c.b.d.m.C.selectByReplyCommentId - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where reply_comment_id = ?
2026-02-01 16:36:34.724 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] DEBUG c.e.g.c.b.d.m.C.selectByReplyCommentId - ==> Parameters: 4001(Long)
2026-02-01 16:36:34.725 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] DEBUG c.e.g.c.b.d.m.C.selectByReplyCommentId - <==      Total: 0
2026-02-01 16:36:34.727 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:36:34.728 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 16:36:34.730 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:36:34.733 [NettyClientPublicExecutor_4] INFO  c.e.g.comment.biz.consumer.DeleteCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B0390652A0003, offsetMsgId=7F00000100002A9F0000000000008AB7, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=broker-a, queueId=2], queueOffset=2]
2026-02-01 16:36:35.179 [nacos-grpc-client-executor-127.0.0.1-15] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Receive server push request, request = NotifySubscriberRequest, requestId = 83
2026-02-01 16:36:35.179 [nacos-grpc-client-executor-127.0.0.1-15] INFO  com.alibaba.nacos.common.remote.client - [9756d63c-f012-4c9e-8ab5-eebf7f9e86ab] Ack server push request, request = NotifySubscriberRequest, requestId = 83
2026-02-01 16:36:35.849 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, size: 1
2026-02-01 16:36:35.849 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 【评论热度值计算】聚合消息, ["[2001]"]
2026-02-01 16:36:35.849 [pool-batch-consume-blocking-queue-thread-0] INFO  c.e.g.c.biz.consumer.CommentHeatUpdateConsumer - ==> 去重后的评论 ID: [2001]
2026-02-01 16:36:35.850 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==>  Preparing: select id, user_id, content_uuid, is_content_empty, image_url, like_total, is_top, create_time, first_reply_comment_id, child_comment_total, level, parent_id, heat, note_id from t_comment where id in ( ? )
2026-02-01 16:36:35.850 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - ==> Parameters: 2001(Long)
2026-02-01 16:36:35.852 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByCommentIds - <==      Total: 1
2026-02-01 16:36:35.852 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==>  Preparing: UPDATE t_comment SET heat = CASE id WHEN ? THEN ? ELSE heat END WHERE id IN ( ? )
2026-02-01 16:36:35.852 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - ==> Parameters: 2001(Long), 6.5(Double), 2001(Long)
2026-02-01 16:36:35.853 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.e.g.c.b.d.m.C.batchUpdateHeatByCommentIds - <==    Updates: 1
2026-02-01 16:37:11.597 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-02-01 16:37:11.599 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":2001}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 16:37:11.599 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 16:37:11.600 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 16:37:11.601 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 16:37:11.602 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==>  Preparing: delete from t_comment where id = ?
2026-02-01 16:37:11.602 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==> Parameters: 2001(Long)
2026-02-01 16:37:11.603 [http-nio-8093-exec-2] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - <==    Updates: 1
2026-02-01 16:37:11.604 [http-nio-8093-exec-2] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-02-01 16:37:11.634 [http-nio-8093-exec-2] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [删除评论], 耗时: 36ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 16:37:11.635 [http-nio-8093-exec-2] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-02-01 16:37:11.637 [NettyClientPublicExecutor_6] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论删除】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B0390F5520005, offsetMsgId=7F00000100002A9F0000000000008D55, messageQueue=MessageQueue [topic=DeleteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2026-02-01 16:37:11.637 [NettyClientPublicExecutor_5] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【删除评论详情本地缓存】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B0390F5520004, offsetMsgId=7F00000100002A9F0000000000008C05, messageQueue=MessageQueue [topic=DeleteCommentDetailLocalCacheTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2026-02-01 16:37:11.642 [ConsumeMessageThread_greennote_group_DeleteCommentDetailLocalCacheTopic_2] INFO  c.e.g.c.b.consumer.DeleteCommentLocalCacheConsumer - ## 消费者消费成功, commentId: 2001
2026-02-01 16:37:11.644 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] INFO  c.e.g.comment.biz.consumer.DeleteCommentConsumer - ## 【删除评论 - 后续业务处理】消费者消费成功, body: {"id":2001,"noteId":1862482047415615529,"userId":100,"contentUuid":"9eabc954-9a06-47bd-bcc6-dce71dcac1f8","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":5,"parentId":1862482047415615529,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:02:57","updateTime":"2026-02-01 16:13:27","childCommentTotal":null,"firstReplyCommentId":null,"heat":null}
2026-02-01 16:37:11.646 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByParentId - ==>  Preparing: delete from t_comment where parent_id = ?
2026-02-01 16:37:11.646 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByParentId - ==> Parameters: 2001(Long)
2026-02-01 16:37:11.652 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByParentId - <==    Updates: 8
2026-02-01 16:37:11.655 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] DEBUG c.e.g.c.b.d.m.N.updateCommentTotalByNoteId - ==>  Preparing: update t_note_count set comment_total = comment_total + ? where note_id = ?
2026-02-01 16:37:11.656 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] DEBUG c.e.g.c.b.d.m.N.updateCommentTotalByNoteId - ==> Parameters: -9(Integer), 1862482047415615529(Long)
2026-02-01 16:37:11.664 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_3] DEBUG c.e.g.c.b.d.m.N.updateCommentTotalByNoteId - <==    Updates: 1
2026-02-01 17:06:34.025 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2026-02-01 17:06:34.026 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [删除评论], 入参: {"commentId":2008}, 请求类: com.evan.greennote.comment.biz.controller.CommentController, 请求方法: deleteComment =======
2026-02-01 17:06:34.034 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==>  Preparing: select id, note_id, user_id, content_uuid, is_content_empty, image_url, `level`, reply_total, like_total, parent_id, reply_comment_id, reply_user_id, is_top, create_time, update_time from t_comment where id = ?
2026-02-01 17:06:34.034 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - ==> Parameters: 2008(Long)
2026-02-01 17:06:34.036 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.selectByPrimaryKey - <==      Total: 1
2026-02-01 17:06:34.037 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==>  Preparing: delete from t_comment where id = ?
2026-02-01 17:06:34.038 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - ==> Parameters: 2008(Long)
2026-02-01 17:06:34.041 [http-nio-8093-exec-4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByPrimaryKey - <==    Updates: 1
2026-02-01 17:06:34.042 [http-nio-8093-exec-4] INFO  c.e.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2026-02-01 17:06:34.077 [http-nio-8093-exec-4] INFO  c.e.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [删除评论], 耗时: 51ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null}======
2026-02-01 17:06:34.078 [http-nio-8093-exec-4] INFO  c.e.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2026-02-01 17:06:34.084 [NettyClientPublicExecutor_8] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【评论删除】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B03ABD9DD0007, offsetMsgId=7F00000100002A9F0000000000009025, messageQueue=MessageQueue [topic=DeleteCommentTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2026-02-01 17:06:34.084 [NettyClientPublicExecutor_7] INFO  c.e.g.comment.biz.service.impl.CommentServiceImpl - ==> 【删除评论详情本地缓存】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014EE063947C6B03ABD9DD0006, offsetMsgId=7F00000100002A9F00000000000092F5, messageQueue=MessageQueue [topic=DeleteCommentDetailLocalCacheTopic, brokerName=broker-a, queueId=0], queueOffset=1]
2026-02-01 17:06:34.084 [ConsumeMessageThread_greennote_group_DeleteCommentDetailLocalCacheTopic_3] INFO  c.e.g.c.b.consumer.DeleteCommentLocalCacheConsumer - ## 消费者消费成功, commentId: 2008
2026-02-01 17:06:34.084 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] INFO  c.e.g.comment.biz.consumer.DeleteCommentConsumer - ## 【删除评论 - 后续业务处理】消费者消费成功, body: {"id":2008,"noteId":1862482047415615522,"userId":100,"contentUuid":"0cb2f8f0-76f9-471e-9de9-fffe3ab97c8a","isContentEmpty":false,"imageUrl":"","level":1,"replyTotal":0,"likeTotal":0,"parentId":1862482047415615522,"replyCommentId":0,"replyUserId":0,"isTop":false,"createTime":"2026-01-31 13:19:20","updateTime":"2026-01-31 13:19:20","childCommentTotal":null,"firstReplyCommentId":null,"heat":null}
2026-02-01 17:06:34.085 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByParentId - ==>  Preparing: delete from t_comment where parent_id = ?
2026-02-01 17:06:34.085 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByParentId - ==> Parameters: 2008(Long)
2026-02-01 17:06:34.090 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] DEBUG c.e.g.c.b.d.m.CommentDOMapper.deleteByParentId - <==    Updates: 6
2026-02-01 17:06:34.093 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] DEBUG c.e.g.c.b.d.m.N.updateCommentTotalByNoteId - ==>  Preparing: update t_note_count set comment_total = comment_total + ? where note_id = ?
2026-02-01 17:06:34.094 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] DEBUG c.e.g.c.b.d.m.N.updateCommentTotalByNoteId - ==> Parameters: -7(Integer), 1862482047415615522(Long)
2026-02-01 17:06:34.100 [ConsumeMessageThread_greennote_group_DeleteCommentTopic_4] DEBUG c.e.g.c.b.d.m.N.updateCommentTotalByNoteId - <==    Updates: 1
2026-02-01 17:07:56.125 [Thread-16] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 17:07:56.125 [Thread-19] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 17:07:56.125 [Thread-16] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 17:07:56.126 [Thread-19] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 17:07:56.134 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.135 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.139 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.140 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.146 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.147 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.151 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.151 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.172 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 17:07:56.172 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 17:07:56.175 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 17:07:56.175 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@603ff413[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 17:07:56.176 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769985372958_127.0.0.1_3137
2026-02-01 17:07:56.177 [nacos-grpc-client-executor-127.0.0.1-400] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769985372958_127.0.0.1_3137]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 17:07:56.180 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7ea50e02[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 401]
2026-02-01 17:07:56.180 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@21a184f[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 634]
2026-02-01 17:07:56.180 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 17:07:56.180 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 17:07:56.180 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 17:07:56.189 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.190 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.194 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.194 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.194 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:07:56.194 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentDetailLocalCacheTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentDetailLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:07:56.195 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:07:56.195 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:07:56.319 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:07:56.319 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:07:56.322 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 17:07:56.324 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2026-02-01 17:08:00.752 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 17:08:00.812 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 17:08:01.171 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 17:08:01.183 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 17:08:01.183 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - The following 1 profile is active: "dev"
2026-02-01 17:08:01.196 [main] WARN  o.s.core.annotation.AnnotationTypeMapping - Support for convention-based annotation attribute overrides is deprecated and will be removed in Spring Framework 6.1. Please annotate the following attributes in @org.springframework.retry.annotation.EnableRetry with appropriate @AliasFor declarations: [proxyTargetClass]
2026-02-01 17:08:01.707 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-02-01 17:08:01.710 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-02-01 17:08:01.731 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2026-02-01 17:08:01.937 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=d98afbae-ec65-34ac-8e93-4c382f596ce1
2026-02-01 17:08:01.977 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:01.978 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:01.979 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.evan.greennote.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.214 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.270 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.273 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.277 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.277 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$725/0x000002ba4750d568] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.279 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.283 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.284 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2026-02-01 17:08:02.495 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8093 (http)
2026-02-01 17:08:02.506 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 17:08:02.506 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2026-02-01 17:08:02.598 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-01 17:08:02.599 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1400 ms
2026-02-01 17:08:02.678 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2026-02-01 17:08:02.949 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2026-02-01 17:08:03.206 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-kv' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 17:08:03.275 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (greennote_group) init on namesrv 127.0.0.1:9876
2026-02-01 17:08:03.751 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:08:03.752 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:commentHeatUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2026-02-01 17:08:03.791 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:08:03.791 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2026-02-01 17:08:03.845 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 17:08:03.861 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'GreenNote-user' URL not provided. Will try picking an instance via load-balancing.
2026-02-01 17:08:03.906 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentDetailLocalCacheTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentDetailLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:08:03.906 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteCommentLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2026-02-01 17:08:03.945 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:08:03.946 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:oneLevelCommentFirstReplyCommentIdUpdateConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2026-02-01 17:08:04.715 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8093 (http) with context path ''
2026-02-01 17:08:04.721 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2026-02-01 17:08:04.721 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2026-02-01 17:08:04.723 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2026-02-01 17:08:04.723 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2026-02-01 17:08:04.743 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2026-02-01 17:08:04.744 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2026-02-01 17:08:04.745 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2026-02-01 17:08:04.748 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2026-02-01 17:08:04.748 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2026-02-01 17:08:04.750 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2026-02-01 17:08:04.758 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of bfaf311f-a747-4be2-917a-abbe99b7549c
2026-02-01 17:08:04.777 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2026-02-01 17:08:04.777 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2026-02-01 17:08:04.777 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2026-02-01 17:08:04.780 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2026-02-01 17:08:04.807 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2026-02-01 17:08:05.581 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1769987285368_127.0.0.1_45980
2026-02-01 17:08:05.582 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Notify connected event to listeners.
2026-02-01 17:08:05.583 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2026-02-01 17:08:05.583 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2026-02-01 17:08:05.583 [main] INFO  com.alibaba.nacos.common.remote.client - [bfaf311f-a747-4be2-917a-abbe99b7549c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1291/0x000002ba479dae70
2026-02-01 17:08:05.584 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] greennote registering service GreenNote-comment with instance Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2026-02-01 17:08:05.594 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP GreenNote-comment 10.140.64.238:8093 register finished
2026-02-01 17:08:05.681 [main] INFO  c.e.g.comment.biz.GreenNoteCommentBizApplication - Started GreenNoteCommentBizApplication in 5.487 seconds (process running for 5.927)
2026-02-01 17:11:09.885 [Thread-16] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2026-02-01 17:11:09.885 [Thread-16] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2026-02-01 17:11:09.885 [Thread-19] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2026-02-01 17:11:09.888 [Thread-19] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2026-02-01 17:11:09.902 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:09.903 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:09.913 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:09.914 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:09.925 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:09.925 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:09.940 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:09.940 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:10.003 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2026-02-01 17:11:10.003 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] greennote deregistering service GreenNote-comment with instance: Instance{instanceId='null', ip='10.140.64.238', port=8093, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2026-02-01 17:11:10.010 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@481de1be[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2026-02-01 17:11:10.011 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1769987285368_127.0.0.1_45980
2026-02-01 17:11:10.014 [nacos-grpc-client-executor-127.0.0.1-49] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1769987285368_127.0.0.1_45980]Ignore complete event,isRunning:false,isAbandon=false
2026-02-01 17:11:10.021 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@6e1a4cff[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 50]
2026-02-01 17:11:10.021 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@c8a5d2c[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 61]
2026-02-01 17:11:10.021 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2026-02-01 17:11:10.021 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2026-02-01 17:11:10.021 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2026-02-01 17:11:10.047 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:10.047 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:10.073 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:10.073 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:10.073 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_first_reply_comment_idCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:11:10.073 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentDetailLocalCacheTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentDetailLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:11:10.073 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_DeleteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:11:10.073 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='greennote_group_CommentHeatUpdateTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentHeatUpdateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2026-02-01 17:11:10.115 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:10911] result: true
2026-02-01 17:11:10.116 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2026-02-01 17:11:10.121 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2026-02-01 17:11:10.133 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
